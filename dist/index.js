!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define("reader",["react"],e):"object"==typeof exports?exports.reader=e(require("react")):t.reader=e(t.react)}(this,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=32)}([function(t,e,n){"use strict";var r,i,o;n.r(e),n.d(e,"ViewType",(function(){return r})),n.d(e,"BindingType",(function(){return i})),n.d(e,"ImageStatus",(function(){return o})),function(t){t.SCROLL="scroll",t.PAGE1="page1",t.PAGE12="page12",t.PAGE23="page23"}(r||(r={})),function(t){t.LEFT="left",t.RIGHT="right"}(i||(i={})),function(t){t.NONE="none",t.LOADING="loading",t.ERROR="error",t.LOADED="loaded"}(o||(o={}))},function(t,e,n){(function(e,r){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(1)),o=n(8),a=n(2),c=n(16);e.validatorSymbol=Symbol("validators"),e.Predicate=class{constructor(t,e={}){this.type=t,this.options=e,this.context={validators:[]},this.context=Object.assign({},this.context,this.options);const n=this.type[0].toLowerCase()+this.type.slice(1);this.addValidator({message:(t,e)=>`Expected ${e&&e.substring(this.type.length+1)||"argument"} to be of type \`${this.type}\` but received type \`${i.default(t)}\``,validator:t=>i.default[n](t)})}[a.testSymbol](t,e,n){for(const{validator:r,message:i}of this.context.validators){if(!0===this.options.optional&&void 0===t)continue;const a=r(t);if(!0===a)continue;let c=n;throw"function"==typeof n&&(c=n()),c=c?`${this.type} \`${c}\``:this.type,new o.ArgumentError(i(t,c,a),e)}}get[e.validatorSymbol](){return this.context.validators}get not(){return c.not(this)}validate(t){return this.addValidator({message:(t,e,n)=>"string"==typeof n?`(${e}) ${n}`:n(e),validator:e=>{const{message:n,validator:r}=t(e);return!!r||n}})}is(t){return this.addValidator({message:(t,e,n)=>n?`(${e}) ${n}`:`Expected ${e} \`${t}\` to pass custom validation function`,validator:t})}addValidator(t){return this.context.validators.push(t),this}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r="undefined"==typeof URL?n(15).URL:URL,{toString:i}=Object.prototype,o=t=>e=>typeof e===t,a=t=>{const e=i.call(t).slice(8,-1);if(e)return e},c=t=>e=>a(e)===t;function u(t){switch(t){case null:return"null";case!0:case!1:return"boolean"}switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"bigint":return"bigint";case"symbol":return"symbol"}if(u.function_(t))return"Function";if(u.observable(t))return"Observable";if(u.array(t))return"Array";if(u.buffer(t))return"Buffer";const e=a(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}const s=t=>"object"==typeof t;u.undefined=o("undefined"),u.string=o("string"),u.number=o("number"),u.bigint=o("bigint"),u.function_=o("function"),u.null_=t=>null===t,u.class_=t=>u.function_(t)&&t.toString().startsWith("class "),u.boolean=t=>!0===t||!1===t,u.symbol=o("symbol"),u.numericString=t=>u.string(t)&&t.length>0&&!Number.isNaN(Number(t)),u.array=Array.isArray,u.buffer=t=>!u.nullOrUndefined(t)&&!u.nullOrUndefined(t.constructor)&&u.function_(t.constructor.isBuffer)&&t.constructor.isBuffer(t),u.nullOrUndefined=t=>u.null_(t)||u.undefined(t),u.object=t=>!u.nullOrUndefined(t)&&(u.function_(t)||s(t)),u.iterable=t=>!u.nullOrUndefined(t)&&u.function_(t[Symbol.iterator]),u.asyncIterable=t=>!u.nullOrUndefined(t)&&u.function_(t[Symbol.asyncIterator]),u.generator=t=>u.iterable(t)&&u.function_(t.next)&&u.function_(t.throw),u.nativePromise=t=>c("Promise")(t),u.promise=t=>u.nativePromise(t)||(t=>!u.null_(t)&&s(t)&&u.function_(t.then)&&u.function_(t.catch))(t),u.generatorFunction=c("GeneratorFunction"),u.asyncFunction=c("AsyncFunction"),u.boundFunction=t=>u.function_(t)&&!t.hasOwnProperty("prototype"),u.regExp=c("RegExp"),u.date=c("Date"),u.error=c("Error"),u.map=t=>c("Map")(t),u.set=t=>c("Set")(t),u.weakMap=t=>c("WeakMap")(t),u.weakSet=t=>c("WeakSet")(t),u.int8Array=c("Int8Array"),u.uint8Array=c("Uint8Array"),u.uint8ClampedArray=c("Uint8ClampedArray"),u.int16Array=c("Int16Array"),u.uint16Array=c("Uint16Array"),u.int32Array=c("Int32Array"),u.uint32Array=c("Uint32Array"),u.float32Array=c("Float32Array"),u.float64Array=c("Float64Array"),u.bigint64Array=c("BigInt64Array"),u.biguint64Array=c("BigUint64Array"),u.arrayBuffer=c("ArrayBuffer"),u.sharedArrayBuffer=c("SharedArrayBuffer"),u.dataView=c("DataView"),u.directInstanceOf=(t,e)=>Object.getPrototypeOf(t)===e.prototype,u.urlInstance=t=>c("URL")(t),u.urlString=t=>{if(!u.string(t))return!1;try{return new r(t),!0}catch(t){return!1}},u.truthy=t=>Boolean(t),u.falsy=t=>!t,u.nan=t=>Number.isNaN(t);const l=new Set(["undefined","string","number","bigint","boolean","symbol"]);u.primitive=t=>u.null_(t)||l.has(typeof t),u.integer=t=>Number.isInteger(t),u.safeInteger=t=>Number.isSafeInteger(t),u.plainObject=t=>{if("Object"!==a(t))return!1;const e=Object.getPrototypeOf(t);return null===e||e===Object.getPrototypeOf({})};const f=new Set(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"]);u.typedArray=t=>{const e=a(t);return void 0!==e&&f.has(e)},u.arrayLike=t=>!u.nullOrUndefined(t)&&!u.function_(t)&&(t=>u.safeInteger(t)&&t>=0)(t.length),u.inRange=(t,e)=>{if(u.number(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(u.array(e)&&2===e.length)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)};const d=["innerHTML","ownerDocument","style","attributes","nodeValue"];u.domElement=t=>u.object(t)&&1===t.nodeType&&u.string(t.nodeName)&&!u.plainObject(t)&&d.every(e=>e in t),u.observable=t=>!!(t&&(t[Symbol.observable]&&t===t[Symbol.observable]()||t["@@observable"]&&t===t["@@observable"]())),u.nodeStream=t=>!u.nullOrUndefined(t)&&s(t)&&u.function_(t.pipe)&&!u.observable(t),u.infinite=t=>t===1/0||t===-1/0;const h=t=>e=>u.integer(e)&&Math.abs(e%2)===t;u.evenInteger=h(0),u.oddInteger=h(1),u.emptyArray=t=>u.array(t)&&0===t.length,u.nonEmptyArray=t=>u.array(t)&&t.length>0,u.emptyString=t=>u.string(t)&&0===t.length,u.nonEmptyString=t=>u.string(t)&&t.length>0,u.emptyStringOrWhitespace=t=>u.emptyString(t)||(t=>u.string(t)&&!1===/\S/.test(t))(t),u.emptyObject=t=>u.object(t)&&!u.map(t)&&!u.set(t)&&0===Object.keys(t).length,u.nonEmptyObject=t=>u.object(t)&&!u.map(t)&&!u.set(t)&&Object.keys(t).length>0,u.emptySet=t=>u.set(t)&&0===t.size,u.nonEmptySet=t=>u.set(t)&&t.size>0,u.emptyMap=t=>u.map(t)&&0===t.size,u.nonEmptyMap=t=>u.map(t)&&t.size>0;const p=(t,e,n)=>{if(!1===u.function_(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(0===n.length)throw new TypeError("Invalid number of values");return t.call(n,e)};u.any=(t,...e)=>p(Array.prototype.some,t,e),u.all=(t,...e)=>p(Array.prototype.every,t,e),Object.defineProperties(u,{class:{value:u.class_},function:{value:u.function_},null:{value:u.null_}}),t.exports=u,e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.testSymbol=Symbol("test"),e.isPredicate=t=>Boolean(t&&t[e.testSymbol])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(t,e,n=5)=>{const r=[];for(const i of e)if(!t.has(i)&&(r.push(i),r.length===n))return r;return 0===r.length||r}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(10)),o=n(11),a=n(0);e.Predicate=a.Predicate;const c=n(2),u=r(n(17)),s=r(n(6)),l=r(n(9)),f=(t,e,n)=>{if(!c.isPredicate(e)&&"string"!=typeof e)throw new TypeError(`Expected second argument to be a predicate or a string, got \`${typeof e}\``);if(c.isPredicate(e)){const n=i.default();l.default(t,()=>o.inferLabel(n),e)}else l.default(t,e,n)};Object.defineProperties(f,{isValid:{value:(t,e)=>{try{return f(t,e),!0}catch(t){return!1}}},create:{value:(t,e)=>n=>{if(c.isPredicate(t)){const e=i.default();l.default(n,()=>o.inferLabel(e),t)}else l.default(n,t,e)}}}),e.default=s.default(u.default(f));var d=n(6);e.StringPredicate=d.StringPredicate,e.NumberPredicate=d.NumberPredicate,e.BooleanPredicate=d.BooleanPredicate,e.ArrayPredicate=d.ArrayPredicate,e.ObjectPredicate=d.ObjectPredicate,e.DatePredicate=d.DatePredicate,e.ErrorPredicate=d.ErrorPredicate,e.MapPredicate=d.MapPredicate,e.WeakMapPredicate=d.WeakMapPredicate,e.SetPredicate=d.SetPredicate,e.WeakSetPredicate=d.WeakSetPredicate,e.AnyPredicate=d.AnyPredicate},function(t,n,r){(function(t){var r="__lodash_hash_undefined__",i=1,o=2,a=9007199254740991,c="[object Arguments]",u="[object Array]",s="[object AsyncFunction]",l="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",y="[object Number]",v="[object Null]",m="[object Object]",b="[object Proxy]",O="[object RegExp]",_="[object Set]",S="[object String]",w="[object Symbol]",E="[object Undefined]",x="[object ArrayBuffer]",C="[object DataView]",P=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,j={};j["[object Float32Array]"]=j["[object Float64Array]"]=j["[object Int8Array]"]=j["[object Int16Array]"]=j["[object Int32Array]"]=j["[object Uint8Array]"]=j["[object Uint8ClampedArray]"]=j["[object Uint16Array]"]=j["[object Uint32Array]"]=!0,j[c]=j[u]=j[x]=j[l]=j[C]=j[f]=j[d]=j[h]=j[g]=j[y]=j[m]=j[O]=j[_]=j[S]=j["[object WeakMap]"]=!1;var A="object"==typeof e&&e&&e.Object===Object&&e,R="object"==typeof self&&self&&self.Object===Object&&self,k=A||R||Function("return this")(),N=n&&!n.nodeType&&n,I=N&&"object"==typeof t&&t&&!t.nodeType&&t,L=I&&I.exports===N,M=L&&A.process,$=function(){try{return M&&M.binding&&M.binding("util")}catch(t){}}(),D=$&&$.isTypedArray;function U(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function V(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function z(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var W,F,G,B=Array.prototype,H=Function.prototype,J=Object.prototype,q=k["__core-js_shared__"],Y=H.toString,X=J.hasOwnProperty,Z=(W=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",K=J.toString,Q=RegExp("^"+Y.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=L?k.Buffer:void 0,et=k.Symbol,nt=k.Uint8Array,rt=J.propertyIsEnumerable,it=B.splice,ot=et?et.toStringTag:void 0,at=Object.getOwnPropertySymbols,ct=tt?tt.isBuffer:void 0,ut=(F=Object.keys,G=Object,function(t){return F(G(t))}),st=It(k,"DataView"),lt=It(k,"Map"),ft=It(k,"Promise"),dt=It(k,"Set"),ht=It(k,"WeakMap"),pt=It(Object,"create"),gt=Dt(st),yt=Dt(lt),vt=Dt(ft),mt=Dt(dt),bt=Dt(ht),Ot=et?et.prototype:void 0,_t=Ot?Ot.valueOf:void 0;function St(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function xt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Et;++e<n;)this.add(t[e])}function Ct(t){var e=this.__data__=new wt(t);this.size=e.size}function Pt(t,e){for(var n=t.length;n--;)if(Ut(t[n][0],e))return n;return-1}function Tt(t){return null==t?void 0===t?E:v:ot&&ot in Object(t)?function(t){var e=X.call(t,ot),n=t[ot];try{t[ot]=void 0;var r=!0}catch(t){}var i=K.call(t);return r&&(e?t[ot]=n:delete t[ot]),i}(t):function(t){return K.call(t)}(t)}function jt(t){return Ht(t)&&Tt(t)==c}function At(t,e,n,r,a){return t===e||(null==t||null==e||!Ht(t)&&!Ht(e)?t!=t&&e!=e:function(t,e,n,r,a,s){var h=zt(t),p=zt(e),v=h?u:Mt(t),b=p?u:Mt(e),E=(v=v==c?m:v)==m,P=(b=b==c?m:b)==m,T=v==b;if(T&&Wt(t)){if(!Wt(e))return!1;h=!0,E=!1}if(T&&!E)return s||(s=new Ct),h||Jt(t)?Rt(t,e,n,r,a,s):function(t,e,n,r,a,c,u){switch(n){case C:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!c(new nt(t),new nt(e)));case l:case f:case y:return Ut(+t,+e);case d:return t.name==e.name&&t.message==e.message;case O:case S:return t==e+"";case g:var s=V;case _:var h=r&i;if(s||(s=z),t.size!=e.size&&!h)return!1;var p=u.get(t);if(p)return p==e;r|=o,u.set(t,e);var v=Rt(s(t),s(e),r,a,c,u);return u.delete(t),v;case w:if(_t)return _t.call(t)==_t.call(e)}return!1}(t,e,v,n,r,a,s);if(!(n&i)){var j=E&&X.call(t,"__wrapped__"),A=P&&X.call(e,"__wrapped__");if(j||A){var R=j?t.value():t,k=A?e.value():e;return s||(s=new Ct),a(R,k,n,r,s)}}return!!T&&(s||(s=new Ct),function(t,e,n,r,o,a){var c=n&i,u=kt(t),s=u.length;if(s!=kt(e).length&&!c)return!1;for(var l=s;l--;){var f=u[l];if(!(c?f in e:X.call(e,f)))return!1}var d=a.get(t);if(d&&a.get(e))return d==e;var h=!0;a.set(t,e),a.set(e,t);for(var p=c;++l<s;){var g=t[f=u[l]],y=e[f];if(r)var v=c?r(y,g,f,e,t,a):r(g,y,f,t,e,a);if(!(void 0===v?g===y||o(g,y,n,r,a):v)){h=!1;break}p||(p="constructor"==f)}if(h&&!p){var m=t.constructor,b=e.constructor;m!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b)&&(h=!1)}return a.delete(t),a.delete(e),h}(t,e,n,r,a,s))}(t,e,n,r,At,a))}function Rt(t,e,n,r,a,c){var u=n&i,s=t.length,l=e.length;if(s!=l&&!(u&&l>s))return!1;var f=c.get(t);if(f&&c.get(e))return f==e;var d=-1,h=!0,p=n&o?new xt:void 0;for(c.set(t,e),c.set(e,t);++d<s;){var g=t[d],y=e[d];if(r)var v=u?r(y,g,d,e,t,c):r(g,y,d,t,e,c);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!U(e,(function(t,e){if(i=e,!p.has(i)&&(g===t||a(g,t,n,r,c)))return p.push(e);var i}))){h=!1;break}}else if(g!==y&&!a(g,y,n,r,c)){h=!1;break}}return c.delete(t),c.delete(e),h}function kt(t){return function(t,e,n){var r=e(t);return zt(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,qt,Lt)}function Nt(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function It(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Bt(t)||(e=t,Z&&Z in e))&&(Ft(t)?Q:P).test(Dt(t));var e}(n)?n:void 0}St.prototype.clear=function(){this.__data__=pt?pt(null):{},this.size=0},St.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},St.prototype.get=function(t){var e=this.__data__;if(pt){var n=e[t];return n===r?void 0:n}return X.call(e,t)?e[t]:void 0},St.prototype.has=function(t){var e=this.__data__;return pt?void 0!==e[t]:X.call(e,t)},St.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=pt&&void 0===e?r:e,this},wt.prototype.clear=function(){this.__data__=[],this.size=0},wt.prototype.delete=function(t){var e=this.__data__,n=Pt(e,t);return!(n<0||(n==e.length-1?e.pop():it.call(e,n,1),--this.size,0))},wt.prototype.get=function(t){var e=this.__data__,n=Pt(e,t);return n<0?void 0:e[n][1]},wt.prototype.has=function(t){return Pt(this.__data__,t)>-1},wt.prototype.set=function(t,e){var n=this.__data__,r=Pt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Et.prototype.clear=function(){this.size=0,this.__data__={hash:new St,map:new(lt||wt),string:new St}},Et.prototype.delete=function(t){var e=Nt(this,t).delete(t);return this.size-=e?1:0,e},Et.prototype.get=function(t){return Nt(this,t).get(t)},Et.prototype.has=function(t){return Nt(this,t).has(t)},Et.prototype.set=function(t,e){var n=Nt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},xt.prototype.add=xt.prototype.push=function(t){return this.__data__.set(t,r),this},xt.prototype.has=function(t){return this.__data__.has(t)},Ct.prototype.clear=function(){this.__data__=new wt,this.size=0},Ct.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ct.prototype.get=function(t){return this.__data__.get(t)},Ct.prototype.has=function(t){return this.__data__.has(t)},Ct.prototype.set=function(t,e){var n=this.__data__;if(n instanceof wt){var r=n.__data__;if(!lt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Et(r)}return n.set(t,e),this.size=n.size,this};var Lt=at?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a)&&(o[i++]=a)}return o}(at(t),(function(e){return rt.call(t,e)})))}:function(){return[]},Mt=Tt;function $t(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||T.test(t))&&t>-1&&t%1==0&&t<e}function Dt(t){if(null!=t){try{return Y.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ut(t,e){return t===e||t!=t&&e!=e}(st&&Mt(new st(new ArrayBuffer(1)))!=C||lt&&Mt(new lt)!=g||ft&&"[object Promise]"!=Mt(ft.resolve())||dt&&Mt(new dt)!=_||ht&&"[object WeakMap]"!=Mt(new ht))&&(Mt=function(t){var e=Tt(t),n=e==m?t.constructor:void 0,r=n?Dt(n):"";if(r)switch(r){case gt:return C;case yt:return g;case vt:return"[object Promise]";case mt:return _;case bt:return"[object WeakMap]"}return e});var Vt=jt(function(){return arguments}())?jt:function(t){return Ht(t)&&X.call(t,"callee")&&!rt.call(t,"callee")},zt=Array.isArray,Wt=ct||function(){return!1};function Ft(t){if(!Bt(t))return!1;var e=Tt(t);return e==h||e==p||e==s||e==b}function Gt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function Bt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ht(t){return null!=t&&"object"==typeof t}var Jt=D?function(t){return function(e){return t(e)}}(D):function(t){return Ht(t)&&Gt(t.length)&&!!j[Tt(t)]};function qt(t){return null!=(e=t)&&Gt(e.length)&&!Ft(e)?function(t,e){var n=zt(t),r=!n&&Vt(t),i=!n&&!r&&Wt(t),o=!n&&!r&&!i&&Jt(t),a=n||r||i||o,c=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=c.length;for(var s in t)!e&&!X.call(t,s)||a&&("length"==s||i&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||$t(s,u))||c.push(s);return c}(t):function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||J))return ut(t);var e,n,r=[];for(var i in Object(t))X.call(t,i)&&"constructor"!=i&&r.push(i);return r}(t);var e}t.exports=function(t,e){return At(t,e)}}).call(this,r(23)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(18);e.StringPredicate=r.StringPredicate;const i=n(20);e.NumberPredicate=i.NumberPredicate;const o=n(21);e.BooleanPredicate=o.BooleanPredicate;const a=n(0),c=n(22);e.ArrayPredicate=c.ArrayPredicate;const u=n(24);e.ObjectPredicate=u.ObjectPredicate;const s=n(29);e.DatePredicate=s.DatePredicate;const l=n(30);e.ErrorPredicate=l.ErrorPredicate;const f=n(31);e.MapPredicate=f.MapPredicate;const d=n(32);e.WeakMapPredicate=d.WeakMapPredicate;const h=n(33);e.SetPredicate=h.SetPredicate;const p=n(34);e.WeakSetPredicate=p.WeakSetPredicate;const g=n(35);e.AnyPredicate=g.AnyPredicate,e.default=(t,e)=>(Object.defineProperties(t,{string:{get:()=>new r.StringPredicate(e)},number:{get:()=>new i.NumberPredicate(e)},boolean:{get:()=>new o.BooleanPredicate(e)},undefined:{get:()=>new a.Predicate("undefined",e)},null:{get:()=>new a.Predicate("null",e)},nullOrUndefined:{get:()=>new a.Predicate("nullOrUndefined",e)},nan:{get:()=>new a.Predicate("nan",e)},symbol:{get:()=>new a.Predicate("symbol",e)},array:{get:()=>new c.ArrayPredicate(e)},object:{get:()=>new u.ObjectPredicate(e)},date:{get:()=>new s.DatePredicate(e)},error:{get:()=>new l.ErrorPredicate(e)},map:{get:()=>new f.MapPredicate(e)},weakMap:{get:()=>new d.WeakMapPredicate(e)},set:{get:()=>new h.SetPredicate(e)},weakSet:{get:()=>new p.WeakSetPredicate(e)},function:{get:()=>new a.Predicate("Function",e)},buffer:{get:()=>new a.Predicate("Buffer",e)},regExp:{get:()=>new a.Predicate("RegExp",e)},promise:{get:()=>new a.Predicate("Promise",e)},typedArray:{get:()=>new a.Predicate("TypedArray",e)},int8Array:{get:()=>new a.Predicate("Int8Array",e)},uint8Array:{get:()=>new a.Predicate("Uint8Array",e)},uint8ClampedArray:{get:()=>new a.Predicate("Uint8ClampedArray",e)},int16Array:{get:()=>new a.Predicate("Int16Array",e)},uint16Array:{get:()=>new a.Predicate("Uint16Array",e)},int32Array:{get:()=>new a.Predicate("Int32Array",e)},uint32Array:{get:()=>new a.Predicate("Uint32Array",e)},float32Array:{get:()=>new a.Predicate("Float32Array",e)},float64Array:{get:()=>new a.Predicate("Float64Array",e)},arrayBuffer:{get:()=>new a.Predicate("ArrayBuffer",e)},dataView:{get:()=>new a.Predicate("DataView",e)},iterable:{get:()=>new a.Predicate("Iterable",e)},any:{value:(...t)=>new g.AnyPredicate(t,e)}}),t)},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(4));e.default=(t,e)=>{try{for(const n of t)i.default(n,e);return!0}catch(t){return t.message}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArgumentError=class extends Error{constructor(t,e){super(t),"captureStackTrace"in Error&&Error.captureStackTrace(this,e),this.name="ArgumentError"}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(2);e.default=function t(e,n,i){i[r.testSymbol](e,t,n)}},function(t,e,n){"use strict";const r=()=>{const t=Error.prepareStackTrace;Error.prepareStackTrace=(t,e)=>e;const e=(new Error).stack.slice(1);return Error.prepareStackTrace=t,e};t.exports=r,t.exports.default=r},function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=r(n(12)),a=i(n(13)),c=i(n(14)),u=/^.*?\((.*?)[,)]/;e.inferLabel=t=>{if(!c.default)return;const e=t[1],n=e.getFileName(),r=e.getLineNumber(),i=e.getColumnNumber();if(!n||null===r||null===i)return;let s=[];try{s=o.readFileSync(n,"utf8").split("\n")}catch(t){return}let l=s[r-1];if(!l)return;l=l.slice(i-1);const f=u.exec(l);if(!f||!f[1])return;const d=f[1];return a.default(d)||a.default(d.split(".").pop())?d:void 0}},function(t,e){t.exports=n(21)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=/^[a-z$_][a-z$_0-9]*$/i,i=new Set(["undefined","null","true","false","super","this","Infinity","NaN"]);e.default=t=>t&&!i.has(t)&&r.test(t)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Boolean(void 0!==r&&r.versions&&r.versions.node)},function(t,e){t.exports=n(22)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.not=t=>{const e=t.addValidator;return t.addValidator=n=>{const i=n.validator,o=n.message;return n.message=(t,e)=>`[NOT] ${o(t,e)}`,n.validator=t=>!i(t),t[r.validatorSymbol].push(n),t.addValidator=e,t},t}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(6));e.default=t=>(Object.defineProperties(t,{optional:{get:()=>i.default({},{optional:!0})}}),t)},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(1)),o=r(n(19)),a=n(0);e.StringPredicate=class extends a.Predicate{constructor(t){super("string",t)}length(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have length \`${t}\`, got \`${e}\``,validator:e=>e.length===t})}minLength(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have a minimum length of \`${t}\`, got \`${e}\``,validator:e=>e.length>=t})}maxLength(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have a maximum length of \`${t}\`, got \`${e}\``,validator:e=>e.length<=t})}matches(t){return this.addValidator({message:(e,n)=>`Expected ${n} to match \`${t}\`, got \`${e}\``,validator:e=>t.test(e)})}startsWith(t){return this.addValidator({message:(e,n)=>`Expected ${n} to start with \`${t}\`, got \`${e}\``,validator:e=>e.startsWith(t)})}endsWith(t){return this.addValidator({message:(e,n)=>`Expected ${n} to end with \`${t}\`, got \`${e}\``,validator:e=>e.endsWith(t)})}includes(t){return this.addValidator({message:(e,n)=>`Expected ${n} to include \`${t}\`, got \`${e}\``,validator:e=>e.includes(t)})}oneOf(t){return this.addValidator({message:(e,n)=>{let r=JSON.stringify(t);if(t.length>10){const e=t.length-10;r=JSON.stringify(t.slice(0,10)).replace(/]$/,`,…+${e} more]`)}return`Expected ${n} to be one of \`${r}\`, got \`${e}\``},validator:e=>t.includes(e)})}get empty(){return this.addValidator({message:(t,e)=>`Expected ${e} to be empty, got \`${t}\``,validator:t=>""===t})}get nonEmpty(){return this.addValidator({message:(t,e)=>`Expected ${e} to not be empty`,validator:t=>""!==t})}equals(t){return this.addValidator({message:(e,n)=>`Expected ${n} to be equal to \`${t}\`, got \`${e}\``,validator:e=>e===t})}get alphanumeric(){return this.addValidator({message:(t,e)=>`Expected ${e} to be alphanumeric, got \`${t}\``,validator:t=>/^[a-z\d]+$/i.test(t)})}get alphabetical(){return this.addValidator({message:(t,e)=>`Expected ${e} to be alphabetical, got \`${t}\``,validator:t=>/^[a-z]+$/gi.test(t)})}get numeric(){return this.addValidator({message:(t,e)=>`Expected ${e} to be numeric, got \`${t}\``,validator:t=>/^(\+|-)?\d+$/i.test(t)})}get date(){return this.addValidator({message:(t,e)=>`Expected ${e} to be a date, got \`${t}\``,validator:o.default})}get lowercase(){return this.addValidator({message:(t,e)=>`Expected ${e} to be lowercase, got \`${t}\``,validator:t=>""!==t.trim()&&t===t.toLowerCase()})}get uppercase(){return this.addValidator({message:(t,e)=>`Expected ${e} to be uppercase, got \`${t}\``,validator:t=>""!==t.trim()&&t===t.toUpperCase()})}get url(){return this.addValidator({message:(t,e)=>`Expected ${e} to be a URL, got \`${t}\``,validator:i.default.urlString})}}},function(t,e,n){"use strict";t.exports=function(t){return!isNaN(Date.parse(t))}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(1)),o=n(0);e.NumberPredicate=class extends o.Predicate{constructor(t){super("number",t)}inRange(t,e){return this.addValidator({message:(n,r)=>`Expected ${r} to be in range [${t}..${e}], got ${n}`,validator:n=>i.default.inRange(n,[t,e])})}greaterThan(t){return this.addValidator({message:(e,n)=>`Expected ${n} to be greater than ${t}, got ${e}`,validator:e=>e>t})}greaterThanOrEqual(t){return this.addValidator({message:(e,n)=>`Expected ${n} to be greater than or equal to ${t}, got ${e}`,validator:e=>e>=t})}lessThan(t){return this.addValidator({message:(e,n)=>`Expected ${n} to be less than ${t}, got ${e}`,validator:e=>e<t})}lessThanOrEqual(t){return this.addValidator({message:(e,n)=>`Expected ${n} to be less than or equal to ${t}, got ${e}`,validator:e=>e<=t})}equal(t){return this.addValidator({message:(e,n)=>`Expected ${n} to be equal to ${t}, got ${e}`,validator:e=>e===t})}oneOf(t){return this.addValidator({message:(e,n)=>{let r=JSON.stringify(t);if(t.length>10){const e=t.length-10;r=JSON.stringify(t.slice(0,10)).replace(/]$/,`,…+${e} more]`)}return`Expected ${n} to be one of \`${r}\`, got ${e}`},validator:e=>t.includes(e)})}get integer(){return this.addValidator({message:(t,e)=>`Expected ${e} to be an integer, got ${t}`,validator:t=>i.default.integer(t)})}get finite(){return this.addValidator({message:(t,e)=>`Expected ${e} to be finite, got ${t}`,validator:t=>!i.default.infinite(t)})}get infinite(){return this.addValidator({message:(t,e)=>`Expected ${e} to be infinite, got ${t}`,validator:t=>i.default.infinite(t)})}get positive(){return this.addValidator({message:(t,e)=>`Expected ${e} to be positive, got ${t}`,validator:t=>t>0})}get negative(){return this.addValidator({message:(t,e)=>`Expected ${e} to be negative, got ${t}`,validator:t=>t<0})}get integerOrInfinite(){return this.addValidator({message:(t,e)=>`Expected ${e} to be an integer or infinite, got ${t}`,validator:t=>i.default.integer(t)||i.default.infinite(t)})}get uint8(){return this.integer.inRange(0,255)}get uint16(){return this.integer.inRange(0,65535)}get uint32(){return this.integer.inRange(0,4294967295)}get int8(){return this.integer.inRange(-128,127)}get int16(){return this.integer.inRange(-32768,32767)}get int32(){return this.integer.inRange(-2147483648,2147483647)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.BooleanPredicate=class extends r.Predicate{constructor(t){super("boolean",t)}get true(){return this.addValidator({message:(t,e)=>`Expected ${e} to be true, got ${t}`,validator:t=>!0===t})}get false(){return this.addValidator({message:(t,e)=>`Expected ${e} to be false, got ${t}`,validator:t=>!1===t})}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(5)),o=r(n(4)),a=n(0);e.ArrayPredicate=class extends a.Predicate{constructor(t){super("array",t)}length(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have length \`${t}\`, got \`${e.length}\``,validator:e=>e.length===t})}minLength(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have a minimum length of \`${t}\`, got \`${e.length}\``,validator:e=>e.length>=t})}maxLength(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have a maximum length of \`${t}\`, got \`${e.length}\``,validator:e=>e.length<=t})}startsWith(t){return this.addValidator({message:(e,n)=>`Expected ${n} to start with \`${t}\`, got \`${e[0]}\``,validator:e=>e[0]===t})}endsWith(t){return this.addValidator({message:(e,n)=>`Expected ${n} to end with \`${t}\`, got \`${e[e.length-1]}\``,validator:e=>e[e.length-1]===t})}includes(...t){return this.addValidator({message:(e,n)=>`Expected ${n} to include all elements of \`${JSON.stringify(t)}\`, got \`${JSON.stringify(e)}\``,validator:e=>t.every(t=>-1!==e.indexOf(t))})}includesAny(...t){return this.addValidator({message:(e,n)=>`Expected ${n} to include any element of \`${JSON.stringify(t)}\`, got \`${JSON.stringify(e)}\``,validator:e=>t.some(t=>-1!==e.indexOf(t))})}get empty(){return this.addValidator({message:(t,e)=>`Expected ${e} to be empty, got \`${JSON.stringify(t)}\``,validator:t=>0===t.length})}get nonEmpty(){return this.addValidator({message:(t,e)=>`Expected ${e} to not be empty`,validator:t=>t.length>0})}deepEqual(t){return this.addValidator({message:(e,n)=>`Expected ${n} to be deeply equal to \`${JSON.stringify(t)}\`, got \`${JSON.stringify(e)}\``,validator:e=>i.default(e,t)})}ofType(t){let e;return this.addValidator({message:(t,n)=>`(${n}) ${e}`,validator:n=>{try{for(const e of n)o.default(e,t);return!0}catch(t){return e=t.message,!1}}})}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(1)),o=r(n(25)),a=r(n(5)),c=n(0),u=r(n(3)),s=r(n(7)),l=r(n(27)),f=n(28);e.ObjectPredicate=class extends c.Predicate{constructor(t){super("object",t)}get plain(){return this.addValidator({message:(t,e)=>`Expected ${e} to be a plain object`,validator:t=>i.default.plainObject(t)})}get empty(){return this.addValidator({message:(t,e)=>`Expected ${e} to be empty, got \`${JSON.stringify(t)}\``,validator:t=>0===Object.keys(t).length})}get nonEmpty(){return this.addValidator({message:(t,e)=>`Expected ${e} to not be empty`,validator:t=>Object.keys(t).length>0})}valuesOfType(t){return this.addValidator({message:(t,e,n)=>`(${e}) ${n}`,validator:e=>{const n=Object.keys(e).map(t=>e[t]);return s.default(n,t)}})}deepValuesOfType(t){return this.addValidator({message:(t,e,n)=>`(${e}) ${n}`,validator:e=>l.default(e,t)})}deepEqual(t){return this.addValidator({message:(e,n)=>`Expected ${n} to be deeply equal to \`${JSON.stringify(t)}\`, got \`${JSON.stringify(e)}\``,validator:e=>a.default(e,t)})}instanceOf(t){return this.addValidator({message:(e,n)=>{let r=e.constructor.name;return r&&"Object"!==r||(r=JSON.stringify(e)),`Expected ${n} \`${r}\` to be of type \`${t.name}\``},validator:e=>e instanceof t})}hasKeys(...t){return this.addValidator({message:(t,e,n)=>`Expected ${e} to have keys \`${JSON.stringify(n)}\``,validator:e=>u.default({has:t=>o.default.has(e,t)},t)})}hasAnyKeys(...t){return this.addValidator({message:(e,n)=>`Expected ${n} to have any key of \`${JSON.stringify(t)}\``,validator:e=>t.some(t=>o.default.has(e,t))})}partialShape(t){return this.addValidator({message:(t,e,n)=>`${n.replace("Expected","Expected property")} in ${e}`,validator:e=>f.partial(e,t)})}exactShape(t){return this.addValidator({message:(t,e,n)=>`${n.replace("Expected","Expected property")} in ${e}`,validator:e=>f.exact(e,t)})}}},function(t,e,n){"use strict";const r=n(26);function i(t){const e=t.split("."),n=[];for(let t=0;t<e.length;t++){let r=e[t];for(;"\\"===r[r.length-1]&&void 0!==e[t+1];)r=r.slice(0,-1)+".",r+=e[++t];n.push(r)}return n}t.exports={get(t,e,n){if(!r(t)||"string"!=typeof e)return void 0===n?t:n;const o=i(e);for(let e=0;e<o.length;e++){if(!Object.prototype.propertyIsEnumerable.call(t,o[e]))return n;if(null==(t=t[o[e]])){if(e!==o.length-1)return n;break}}return t},set(t,e,n){if(!r(t)||"string"!=typeof e)return t;const o=t,a=i(e);for(let e=0;e<a.length;e++){const i=a[e];r(t[i])||(t[i]={}),e===a.length-1&&(t[i]=n),t=t[i]}return o},delete(t,e){if(!r(t)||"string"!=typeof e)return;const n=i(e);for(let e=0;e<n.length;e++){const i=n[e];if(e===n.length-1)return void delete t[i];if(t=t[i],!r(t))return}},has(t,e){if(!r(t)||"string"!=typeof e)return!1;const n=i(e);for(let e=0;e<n.length;e++){if(!r(t))return!1;if(!(n[e]in t))return!1;t=t[n[e]]}return!0}}},function(t,e,n){"use strict";t.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(1)),o=r(n(4)),a=(t,e)=>i.default.plainObject(t)?Object.keys(t).every(n=>a(t[n],e)):(o.default(t,e),!0);e.default=(t,e)=>{try{return a(t,e)}catch(t){return t.message}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(1)),o=r(n(9)),a=n(2);e.partial=function t(e,n,r){try{for(const c of Object.keys(n)){const u=r?`${r}.${c}`:c;if(a.isPredicate(n[c]))o.default(e[c],u,n[c]);else if(i.default.plainObject(n[c])){const r=t(e[c],n[c],u);if(!0!==r)return r}}return!0}catch(t){return t.message}},e.exact=function t(e,n,r){try{const c=new Set(Object.keys(e));for(const u of Object.keys(n)){c.delete(u);const s=r?`${r}.${u}`:u;if(a.isPredicate(n[u]))o.default(e[u],s,n[u]);else if(i.default.plainObject(n[u])){if(!Object.prototype.hasOwnProperty.call(e,u))return`Expected \`${s}\` to exist`;const r=t(e[u],n[u],s);if(!0!==r)return r}}if(c.size>0){const t=Array.from(c.keys())[0];return`Did not expect property \`${r?`${r}.${t}`:t}\` to exist, got \`${e[t]}\``}return!0}catch(t){return t.message}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.DatePredicate=class extends r.Predicate{constructor(t){super("date",t)}before(t){return this.addValidator({message:(e,n)=>`Expected ${n} ${e.toISOString()} to be before ${t.toISOString()}`,validator:e=>e.getTime()<t.getTime()})}after(t){return this.addValidator({message:(e,n)=>`Expected ${n} ${e.toISOString()} to be after ${t.toISOString()}`,validator:e=>e.getTime()>t.getTime()})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.ErrorPredicate=class extends r.Predicate{constructor(t){super("error",t)}name(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have name \`${t}\`, got \`${e.name}\``,validator:e=>e.name===t})}message(t){return this.addValidator({message:(e,n)=>`Expected ${n} message to be \`${t}\`, got \`${e.message}\``,validator:e=>e.message===t})}messageIncludes(t){return this.addValidator({message:(e,n)=>`Expected ${n} message to include \`${t}\`, got \`${e.message}\``,validator:e=>e.message.includes(t)})}hasKeys(...t){return this.addValidator({message:(e,n)=>`Expected ${n} message to have keys \`${t.join("`, `")}\``,validator:e=>t.every(t=>e.hasOwnProperty(t))})}instanceOf(t){return this.addValidator({message:(e,n)=>`Expected ${n} \`${e.name}\` to be of type \`${t.name}\``,validator:e=>e instanceof t})}get typeError(){return this.instanceOf(TypeError)}get evalError(){return this.instanceOf(EvalError)}get rangeError(){return this.instanceOf(RangeError)}get referenceError(){return this.instanceOf(ReferenceError)}get syntaxError(){return this.instanceOf(SyntaxError)}get uriError(){return this.instanceOf(URIError)}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(5)),o=n(0),a=r(n(3)),c=r(n(7));e.MapPredicate=class extends o.Predicate{constructor(t){super("Map",t)}size(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have size \`${t}\`, got \`${e.size}\``,validator:e=>e.size===t})}minSize(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have a minimum size of \`${t}\`, got \`${e.size}\``,validator:e=>e.size>=t})}maxSize(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have a maximum size of \`${t}\`, got \`${e.size}\``,validator:e=>e.size<=t})}hasKeys(...t){return this.addValidator({message:(t,e,n)=>`Expected ${e} to have keys \`${JSON.stringify(n)}\``,validator:e=>a.default(e,t)})}hasAnyKeys(...t){return this.addValidator({message:(e,n)=>`Expected ${n} to have any key of \`${JSON.stringify(t)}\``,validator:e=>t.some(t=>e.has(t))})}hasValues(...t){return this.addValidator({message:(t,e,n)=>`Expected ${e} to have values \`${JSON.stringify(n)}\``,validator:e=>a.default(new Set(e.values()),t)})}hasAnyValues(...t){return this.addValidator({message:(e,n)=>`Expected ${n} to have any value of \`${JSON.stringify(t)}\``,validator:e=>{const n=new Set(e.values());return t.some(t=>n.has(t))}})}keysOfType(t){return this.addValidator({message:(t,e,n)=>`(${e}) ${n}`,validator:e=>c.default(e.keys(),t)})}valuesOfType(t){return this.addValidator({message:(t,e,n)=>`(${e}) ${n}`,validator:e=>c.default(e.values(),t)})}get empty(){return this.addValidator({message:(t,e)=>`Expected ${e} to be empty, got \`${JSON.stringify(Array.from(t))}\``,validator:t=>0===t.size})}get nonEmpty(){return this.addValidator({message:(t,e)=>`Expected ${e} to not be empty`,validator:t=>t.size>0})}deepEqual(t){return this.addValidator({message:(e,n)=>`Expected ${n} to be deeply equal to \`${JSON.stringify(Array.from(t))}\`, got \`${JSON.stringify(Array.from(e))}\``,validator:e=>i.default(e,t)})}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0),o=r(n(3));e.WeakMapPredicate=class extends i.Predicate{constructor(t){super("WeakMap",t)}hasKeys(...t){return this.addValidator({message:(t,e,n)=>`Expected ${e} to have keys \`${JSON.stringify(n)}\``,validator:e=>o.default(e,t)})}hasAnyKeys(...t){return this.addValidator({message:(e,n)=>`Expected ${n} to have any key of \`${JSON.stringify(t)}\``,validator:e=>t.some(t=>e.has(t))})}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(n(5)),o=n(0),a=r(n(3)),c=r(n(7));e.SetPredicate=class extends o.Predicate{constructor(t){super("Set",t)}size(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have size \`${t}\`, got \`${e.size}\``,validator:e=>e.size===t})}minSize(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have a minimum size of \`${t}\`, got \`${e.size}\``,validator:e=>e.size>=t})}maxSize(t){return this.addValidator({message:(e,n)=>`Expected ${n} to have a maximum size of \`${t}\`, got \`${e.size}\``,validator:e=>e.size<=t})}has(...t){return this.addValidator({message:(t,e,n)=>`Expected ${e} to have items \`${JSON.stringify(n)}\``,validator:e=>a.default(e,t)})}hasAny(...t){return this.addValidator({message:(e,n)=>`Expected ${n} to have any item of \`${JSON.stringify(t)}\``,validator:e=>t.some(t=>e.has(t))})}ofType(t){return this.addValidator({message:(t,e,n)=>`(${e}) ${n}`,validator:e=>c.default(e,t)})}get empty(){return this.addValidator({message:(t,e)=>`Expected ${e} to be empty, got \`${JSON.stringify(Array.from(t))}\``,validator:t=>0===t.size})}get nonEmpty(){return this.addValidator({message:(t,e)=>`Expected ${e} to not be empty`,validator:t=>t.size>0})}deepEqual(t){return this.addValidator({message:(e,n)=>`Expected ${n} to be deeply equal to \`${JSON.stringify(Array.from(t))}\`, got \`${JSON.stringify(Array.from(e))}\``,validator:e=>i.default(e,t)})}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const i=n(0),o=r(n(3));e.WeakSetPredicate=class extends i.Predicate{constructor(t){super("WeakSet",t)}has(...t){return this.addValidator({message:(t,e,n)=>`Expected ${e} to have items \`${JSON.stringify(n)}\``,validator:e=>o.default(e,t)})}hasAny(...t){return this.addValidator({message:(e,n)=>`Expected ${n} to have any item of \`${JSON.stringify(t)}\``,validator:e=>t.some(t=>e.has(t))})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(8),i=n(2);e.AnyPredicate=class{constructor(t,e={}){this.predicates=t,this.options=e}[i.testSymbol](t,e,n){const i=["Any predicate failed with the following errors:"];for(const r of this.predicates)try{return void e(t,n,r)}catch(e){if(void 0===t&&!0===this.options.optional)return;i.push(`- ${e.message}`)}throw new r.ArgumentError(i.join("\n"),e)}}}]);const i=t.exports;t.exports=i.default,Object.assign(t.exports,i)}).call(this,n(13),n(20))},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(e,n){e.exports=t},function(t,e,n){"use strict";n.r(e),n.d(e,"getRootElement",(function(){return c})),n.d(e,"getContentRootElement",(function(){return u})),n.d(e,"getContentContainerElement",(function(){return s})),n.d(e,"getScrollWidth",(function(){return l})),n.d(e,"getScrollHeight",(function(){return f})),n.d(e,"getScrollLeft",(function(){return d})),n.d(e,"getScrollTop",(function(){return h})),n.d(e,"setScrollLeft",(function(){return p})),n.d(e,"setScrollTop",(function(){return g})),n.d(e,"getClientWidth",(function(){return y})),n.d(e,"getClientHeight",(function(){return v})),n.d(e,"debounce",(function(){return m})),n.d(e,"throttle",(function(){return b})),n.d(e,"sleep",(function(){return O})),n.d(e,"hasIntersect",(function(){return _})),n.d(e,"logger",(function(){return S}));var r=n(7),i=n.n(r),o=n(8),a=n.n(o),c=function(){return document.scrollingElement?document.scrollingElement:document.documentElement||document.body},u=function(){return document.getElementById("content_root")},s=function(){return document.getElementById("content_container")},l=function(){var t=u();return t?t.scrollWidth:0},f=function(){var t=c();return t?t.scrollHeight:0},d=function(){var t=u();return t?t.scrollLeft:0},h=function(){var t=c();return t?t.scrollTop:0},p=function(t){var e=u();e&&(e.scrollLeft=t)},g=function(t){var e=c();e&&(e.scrollTop=t)},y=function(){return document.documentElement.clientWidth},v=function(){return document.documentElement.clientHeight},m=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r&&!e&&t.apply(null,o),e&&(clearTimeout(e),e=null),e=setTimeout((function(){e=null,t.apply(null,o)}),n)}},b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!1;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];r||(n?setTimeout((function(){return t.apply(null,o)}),e):t.apply(null,o),r=!0,setTimeout((function(){r=!1}),e))}},O=function(){var t=a()(i.a.mark((function t(){var e,n=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:0,t.abrupt("return",new Promise((function(t){return setTimeout(t,e)})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function(t,e){return t[0]<e[0]?t[1]>e[0]:e[1]>t[0]},S=console.log},function(t,e,n){"use strict";n.r(e),n.d(e,"isScroll",(function(){return o})),n.d(e,"isDoublePage",(function(){return a})),n.d(e,"columnsInPage",(function(){return c})),n.d(e,"columnWidth",(function(){return u})),n.d(e,"columnGap",(function(){return s})),n.d(e,"contentPadding",(function(){return l})),n.d(e,"containerWidth",(function(){return f})),n.d(e,"containerHeight",(function(){return d})),n.d(e,"allowedPageNumber",(function(){return h}));var r=n(4),i=n(0),o=function(t){return t.viewType===i.ViewType.SCROLL},a=function(t){var e=t.viewType;return e===i.ViewType.PAGE12||e===i.ViewType.PAGE23},c=function(t){var e=t.viewType;return e===i.ViewType.PAGE12||e===i.ViewType.PAGE23?2:1},u=function(t){var e=c(t);return(f(t)-s(t)*(e-1))/e},s=function(t){var e=t.columnGapInPercent,n=Math.ceil(Object(r.getClientWidth)()*(e/100));return n%2==1?n+1:n},l=function(t){var e=t.contentPaddingInPercent,n=Object(r.getClientWidth)();return Math.ceil(n*(e/100))},f=function(t){var e=Object(r.getClientWidth)()-2*t.containerHorizontalMargin,n=e-2*l(t);return n%2==1?n+1:n},d=function(t){var e=t.containerVerticalMargin;return Object(r.getClientHeight)()-2*e},h=function(t,e,n){var r=n,i=r%2==0,o=[1,e.totalPage];return a(t)&&i&&(r-=1),Math.max(Math.min(r,o[1]),o[0])}},function(t,e,n){"use strict";n.r(e),n.d(e,"isScroll",(function(){return o})),n.d(e,"isDoublePage",(function(){return a})),n.d(e,"columnsInPage",(function(){return c})),n.d(e,"contentWidth",(function(){return u})),n.d(e,"ratio",(function(){return s})),n.d(e,"containerWidth",(function(){return l})),n.d(e,"allowedPageNumber",(function(){return f})),n.d(e,"objectPosition",(function(){return d})),n.d(e,"startWithBlankPage",(function(){return h}));var r=n(4),i=n(0),o=function(t){return t.viewType===i.ViewType.SCROLL},a=function(t){var e=t.viewType;return e===i.ViewType.PAGE12||e===i.ViewType.PAGE23},c=function(t){var e=t.viewType;return e===i.ViewType.PAGE12||e===i.ViewType.PAGE23?2:1},u=function(t){var e=Object(r.getClientWidth)();return o(t)?Math.ceil(e*(t.contentWidthInPercent/100)):e/c(t)},s=function(t,e){return e&&t?e/t:1.4},l=function(t,e){var n=u(t),r=e.totalPage+(t.viewType===i.ViewType.PAGE23?1:0);return a(t)&&r%2==1&&(r+=1),n*r},f=function(t,e,n){var r=n,o=[t.viewType===i.ViewType.PAGE23?0:1,e.totalPage];if(a(t)){var c=t.viewType===i.ViewType.PAGE23,u=t.viewType===i.ViewType.PAGE12,s=r%2==0;s&&!c&&(r-=1),s||u||(r-=1)}return Math.max(Math.min(r,o[1]),o[0])},d=function(t,e){return o(t)||!a(t)?"50% 50%":t.bindingType===i.BindingType.LEFT&&t.viewType===i.ViewType.PAGE12||t.bindingType===i.BindingType.RIGHT&&t.viewType===i.ViewType.PAGE23?e%2==0?"right 50%":"left 50%":e%2==0?"left 50%":"right 50%"},h=function(t){return t.viewType===i.ViewType.PAGE23}},function(t,e,n){t.exports=n(12)},function(t,e){function n(t,e,n,r,i,o,a){try{var c=t[o](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function c(t){n(a,i,o,c,u,"next",t)}function u(t){n(a,i,o,c,u,"throw",t)}c(void 0)}))}}},function(t,e,n){var r,i,o,a,c;/*! @ridi/reader.js v2.0.0-alpha.28 */
if(t.exports=function t(e,n,i){function o(c,u){if(!n[c]){if(!e[c]){if(!u&&"function"==typeof r&&r)return r(c,!0);if(a)return a(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[c]={exports:{}};e[c][0].call(l.exports,(function(t){return o(e[c][1][t]||t)}),l,l.exports,t,e,n,i)}return n[c].exports}for(var a="function"==typeof r&&r,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=t("./Logger"))&&r.__esModule?r:{default:r};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=void 0,this.height=void 0,this.gap=void 0,this.isDoublePageMode=!1,this.isScrollMode=!1,this.maxSelectionLength=1e3,this.systemMajorVersion=void 0,this.isSameDomAsUi=!1,this.shouldViewportInitialize=!1,this.shouldTwoPageAsOneWhenDoublePageMode=!1,this.onMessage=function(t){return i.default.info(t)}}return a(t,[{key:"pageGap",get:function(){return this.gap}},{key:"pageUnit",get:function(){return this.isScrollMode?this.pageHeightUnit:this.pageWidthUnit}},{key:"pageWidthUnit",get:function(){var t=this.shouldTwoPageAsOneWhenDoublePageMode&&this.isDoublePageMode?2:1;return(this.width+this.pageGap)*t}},{key:"pageHeightUnit",get:function(){return this.height}}]),a(t,[{key:"toObject",value:function(){return{width:this.width,height:this.height,gap:this.height,isDoublePageMode:this.isDoublePageMode,isScrollMode:this.isScrollMode,maxSelectionLength:this.maxSelectionLength,systemMajorVersion:this.systemMajorVersion,isSameDomAsUi:this.isSameDomAsUi,shouldViewportInitialize:this.shouldViewportInitialize,shouldTwoPageAsOneWhenDoublePageMode:this.shouldTwoPageAsOneWhenDoublePageMode,onMessage:this.onMessage}}}],[{key:"build",value:function(e){var n=new t;return e(n),Object.freeze(n),n}}]),t}();n.default=c},{"./Logger":2}],2:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"info",value:function(t){for(var e,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).log.apply(e,[t].concat(r))}},{key:"debug",value:function(t){}},{key:"error",value:function(t){for(var e,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).error.apply(e,[t].concat(r))}}])&&r(e,n),t}();n.default=i},{}],3:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={TOP:"top",BOTTOM:"bottom"},a=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:-1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.TOP;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodeIndex=e,this._wordIndex=n,this._type=r}return i(t,[{key:"nodeIndex",get:function(){return this._nodeIndex}},{key:"wordIndex",get:function(){return this._wordIndex}},{key:"type",get:function(){return this._type}}]),i(t,[{key:"toString",value:function(){return"".concat(this.nodeIndex).concat("#").concat(this.wordIndex)}}],[{key:"fromString",value:function(e,n){var r=e.split("#");return new t(parseInt(r[0],10),parseInt(r[1],10),n)}}]),t}();a.Type=o;var c=a;n.default=c},{}],4:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e?(this.left=e.left||e.x||0,this.top=e.top||e.y||0,this.right=e.right||this.left+(e.width||0),this.bottom=e.bottom||this.top+(e.height||0)):(this.left=0,this.top=0,this.right=0,this.bottom=0)}return i(t,[{key:"isZero",get:function(){return 0===this.left&&0===this.top&&0===this.right&&0===this.bottom}},{key:"isEmpty",get:function(){return this.left>=this.right||this.top>=this.bottom}},{key:"width",get:function(){return Math.max(this.right-this.left,0)}},{key:"height",get:function(){return Math.max(this.bottom-this.top,0)}},{key:"x",get:function(){return this.left},set:function(t){this.left=t}},{key:"minX",get:function(){return this.left}},{key:"midX",get:function(){return this.left+this.width/2}},{key:"maxX",get:function(){return this.left+this.width}},{key:"y",get:function(){return this.top},set:function(t){this.top=t}},{key:"minY",get:function(){return this.top}},{key:"midY",get:function(){return this.top+this.height/2}},{key:"maxY",get:function(){return this.top+this.height}},{key:"center",get:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}}}]),i(t,[{key:"equals",value:function(e){return e=new t(e),this.left===e.left&&this.top===e.top&&this.width===e.width&&this.height===e.height}},{key:"contains",value:function(e,n){if(this.isEmpty)return!1;if("number"!=typeof e){var r=new t(e);return!r.isEmpty&&this.left<=r.left&&this.top<=r.top&&this.right>=r.right&&this.bottom>=r.bottom}return this.left<=e&&e<=this.right&&this.top<=n&&n<=this.bottom}},{key:"inset",value:function(t,e,n,r){if(void 0===t)return this;if(void 0===e&&void 0===n&&void 0===r){var i=t;return this.inset(i,i,i,i)}if(void 0===n&&void 0===r){var o=t,a=e;return this.inset(o/2,a/2,o/2,a/2)}return this.left-=t,this.top+=e,this.right-=n,this.bottom+=r||0,this}},{key:"intersection",value:function(e){e=new t(e);var n=Math.max(this.left,e.left),r=Math.max(this.top,e.top),i=Math.min(this.right,e.right),o=Math.min(this.bottom,e.bottom);return n<i&&r<o?new t({left:n,top:r,right:i,bottom:o}):new t}},{key:"toAbsolute",value:function(){return null}},{key:"toJsonString",value:function(){return JSON.stringify(this.toObject())}},{key:"toObject",value:function(){return{left:this.left,top:this.top,right:this.right,bottom:this.bottom,width:this.width,height:this.height,x:this.x,y:this.y}}}]),t}();n.default=o},{}],5:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t){var e="function"==typeof Map?new Map:void 0;return(o=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,n){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&a(i,n.prototype),i}).apply(null,arguments)}(t,arguments,c(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a(r,t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,c(e).apply(this,arguments))}var n,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(e,o(Array)),n=e,(u=[{key:"contains",value:function(t,e){return"number"==typeof t&&void 0!==e?void 0!==this.find((function(n){return n.contains(t,e)})):void 0!==this.find((function(e){return e.contains(t)}))}},{key:"trim",value:function(){return this.filter((function(t){return 1<t.width}))}},{key:"toAbsolute",value:function(){return this.map((function(t){return t.toAbsolute()}))}},{key:"toJsonString",value:function(){return JSON.stringify(this.map((function(t){return t.toObject()})))}},{key:"toArray",value:function(){return this.map((function(t){return t.toObject()}))}}])&&i(n.prototype,u),e}();n.default=u},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./Logger")),i=o(t("./Util"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"_createRegex",value:function(t,e,n,r){return new RegExp("".concat(t||"").concat(e||"").concat(n||""),r||"gm")}},{key:"getSplitWordRegex",value:function(){return i.default.getSplitWordRegex()}},{key:"getWhitespaceRegex",value:function(t,e,n){return this._createRegex(t,"[ \\u00A0]",e,n)}},{key:"getNewLineRegex",value:function(t,e,n){return this._createRegex(t,"[\\r\\n]",e,n)}},{key:"getWhitespaceAndNewLineRegex",value:function(t,e,n){return this._createRegex(t,"[\\t\\r\\n\\s\\u00A0]",e,n)}},{key:"getSentenceRegex",value:function(t,e,n){return this._createRegex(t,"[.。?!\"”'’」』〞〟]",e,n)}},{key:"isLastCharOfSentence",value:function(){return null!==(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").match(this.getSentenceRegex())}},{key:"isDigitOrLatin",value:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").charCodeAt(0);return this.isLatinCharCode(t)||this.isDigitCharCode(t)}},{key:"isPeriodPointOrName",value:function(t,e){if(void 0===t||void 0===e)return!1;var n=0,r=t.search(/[.](\s{0,})$/gm);return 0<r&&this.isDigitOrLatin(t[r-1])&&(n+=1),0<=(r=e.search(/[^\s]/gm))&&this.isDigitOrLatin(e[r])&&(n+=1),2===n}},{key:"getBrackets",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";try{return t.match(/[\(\)\{\}\[\]]/gm)||[]}catch(t){return[]}}},{key:"isOnePairBracket",value:function(){return null!==((0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")).match(/\(\)|\{\}|\[\]/gm)}},{key:"mergeSentencesWithinBrackets",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=[],i=[];return e.forEach((function(e){var r=0<i.length;t.getBrackets(e).forEach((function(e){var n=i.pop();n?t.isOnePairBracket(n,e)||(i.push(n),i.push(e)):i.push(e)})),n.push((r?n.pop():"")+e)})),0<i.length&&(r.default.error("Brackets does not match."),r.default.error({sentences:e,brackets:i,resultSentences:n})),n}},{key:"_containCharCode",value:function(t,e){if(!isNaN(t))for(var n=0;n<e.length;n+=2)if(e[n]<=t&&t<=e[n+1])return!0;return!1}},{key:"isDigitCharCode",value:function(t){return this._containCharCode(t,[48,57])}},{key:"isSpaceCharCode",value:function(t){return 32===t||160===t}},{key:"isTildeCharCode",value:function(t){return 126===t||8764===t||12316===t}},{key:"isColonCharCode",value:function(t){return 58===t}},{key:"hangulCodeTable",value:function(){return[44032,55215]}},{key:"isHangulCharCode",value:function(t){return this._containCharCode(t,this.hangulCodeTable())}},{key:"latinCodeTable",value:function(){return[32,127,160,255,256,383,384,591]}},{key:"isLatinCharCode",value:function(t,e){if(isNaN(t))return!1;if(256<=t&&t<=383){if("u"===e){if(256<=t&&t<=311&&t%2==0||330<=t&&t<=375&&t%2==0||313<=t&&t<=328&&t%2==1||377<=t&&t<=382&&t%2==1)return!0;if(376===t)return!0}else if("l"===e){if(256<=t&&t<=311&&t%2==1||330<=t&&t<=375&&t%2==1||313<=t&&t<=328&&t%2==0||377<=t&&t<=382&&t%2==0)return!0;if(312===t||329===t||383===t)return!0}return!1}if(384<=t&&t<=591)return!0;var n,r=[65,90,192,214,216,222],i=[97,122,223,246,248,255];return n="u"===e?r:"l"===e?i:[].concat(r).concat(i),this._containCharCode(t,n)}},{key:"chineseCodeTable",value:function(){return[19968,40959,63744,64255,13056,13311,13312,19903,131072,173791,173824,177983,177984,178207,178208,183983,183984,191471,194560,195103]}},{key:"isChineseCharCode",value:function(t){return this._containCharCode(t,this.chineseCodeTable())}},{key:"japaneseCodeTable",value:function(){return[12288,12351,12352,12447,12448,12543,65280,65519,19968,40959]}},{key:"isJapaneseCharCode",value:function(t){return this._containCharCode(t,this.japaneseCodeTable())}},{key:"getContainCharRegex",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=function(t){return 65535<t?null:String.fromCharCode(t)},n="[";return t.forEach((function(t){for(var r=0;r<t.length;r+=2){var i=e(t[r]),o=e(t[r+1]);i&&o&&(n+="".concat(i,"-").concat(o))}})),n+="]",new RegExp("^".concat(n,"{1,}$"),"gm")}},{key:"getInitialCharCode",value:function(t){return 12544+[49,50,52,55,56,57,65,66,67,70,71,72,73,74,75,76,77,78][(t-44032-(t-44032)%28)/28/21]}},{key:"getMedialCharCodeIndex",value:function(t){return(t-44032-(t-44032)%28)/28%21}},{key:"getMedialCharCode",value:function(t){return 12544+[79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99][this.getMedialCharCodeIndex(t)]}},{key:"getFinalCharCode",value:function(t){var e=(t-44032)%28;return(0===e?0:12544)+[0,49,50,51,52,53,54,55,57,58,59,60,61,62,63,64,65,66,68,69,70,71,72,74,75,76,77,78][e]}},{key:"numericToNotationString",value:function(t){var e,n,r,i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];i?(e=["","일","이","삼","사","오","육","칠","팔","구"],n=["","일","이","삼","사","오","육","칠","팔","구"],r=["십","일","이","삼","사","오","육","칠","팔","구"]):(e=["","one","two","three","four","five","six","seven","eight","nine"],n=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],r=["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"]);var o=function(t){if(t<10)return e[t];if(!i&&10<=t&&t<20)return r[t-10];if(i&&t<20)return"십".concat(e[t%10]);var o=i?"십":" ";return"".concat(n[Math.floor(t/10)]).concat(o).concat(e[t%10])},a=function(t){if(99<t){if(i&&t<200)return"백".concat(o(t%100));var n=i?"백":" hundred ";return"".concat(e[Math.floor(t/100)]).concat(n)+"".concat(o([t%100]))}return o(t)},c=function t(e){if(1e3<=e){if(i&&e<2e3)return"천".concat(a(e%1e3));var n=i?"천":" thousand ";return"".concat(t(Math.floor(e/1e3))).concat(n)+"".concat(a([e%1e3]))}return a(e)};return 0===t?i?"영":"zero":function t(e){var n=i?1e4:1e6;if(n<=e){if(i&&e<2*n)return"만".concat(c(e%n));var r=i?"만":" million ";return"".concat(t(Math.floor(e/n))).concat(r)+"".concat(c([e%n]))}return c(e)}(t).trim()}},{key:"numericToOrdinalString",value:function(t){var e=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=["","한","두","세","네","다섯","여섯","일곱","여덟","아홉"],i=["","하나","둘","셋","넷","다섯","여섯","일곱","여덟","아홉"],o=["","열","스물","서른","마흔","쉰","예순","일흔","여든","아흔"],a=null!==n.match(/^(명|공|달|시|종|벌|채|갈|쾌|근|문|큰|살|째)(?!러)/gm);if(!a&&n.length)return null;var c,u=function(t){if(t<10)return r[t];var e=a?r[t%10]:i[t%10];return"".concat(o[Math.floor(t/10)]).concat(e)},s=function(t){return 99<t?t<200?"백".concat(u(t%100)):"".concat(e.numericToNotationString(Math.floor(t/100)),"백")+"".concat(u(t%100)):u(t)},l=function(t){return 1e3<=t?t<2e3?"천".concat(s(t%1e3)):"".concat(e.numericToNotationString(Math.floor(t/1e3)),"천")+"".concat(s(t%1e3)):s(t)};return 0===t?null:1e4<=(c=t)?c<2e4?"만".concat(l(c%1e4)):"".concat(e.numericToNotationString(Math.floor(c/1e4)),"만")+"".concat(l(c%1e4)):l(c)}}])&&a(e,n),t}();n.default=c},{"./Logger":2,"./Util":7}],7:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=NodeFilter,o=i.SHOW_TEXT,a=i.FILTER_ACCEPT,c=i.FILTER_SKIP,u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"createTextNodeIterator",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0};return document.createNodeIterator(t,o,{acceptNode:function(t){return e(t)?a:c}},!0)}},{key:"createNodeIterator",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return!0},r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return document.createNodeIterator(t,e,{acceptNode:function(t){return n(t)?a:c}},r)}},{key:"getFootnoteRegex",value:function(){return/^(\[|\{|\(|주|)[0-9].*(\)|\}|\]|\.|)$/gm}},{key:"getSplitWordRegex",value:function(){return new RegExp(" |\\u00A0")}},{key:"getImageSize",value:function(e){var n=e.attributes,r=document.createAttribute("size");return r.value="0px",{dWidth:e.width,dHeight:e.height,nWidth:e.naturalWidth,nHeight:e.naturalHeight,sWidth:t.getMatchedCSSValue(e,"width"),sHeight:t.getMatchedCSSValue(e,"height"),aWidth:(n.width||r).value,aHeight:(n.height||r).value}}},{key:"getStylePropertyValue",value:function(t,e){var n=t;return t.nodeType&&(n=window.getComputedStyle(t)),parseFloat(n[e])||0}},{key:"getStylePropertyValues",value:function(t,e){var n=t;t.nodeType&&(n=window.getComputedStyle(t));for(var r=0,i=0;i<e.length;i+=1)r+=parseInt(n[e[i]],10)||0;return r}},{key:"_getMatchedCSSValue",value:function(t,e){var n=t.style.getPropertyValue(e);if(t.style.getPropertyPriority(e))return n;var r=window.getMatchedCSSRules(t);if(null===r)return n;for(var i=r.length-1;0<=i;i-=1){var o=r[i],a=o.style.getPropertyPriority(e);if((null===n||0===n.length||a)&&(n=o.style.getPropertyValue(e),a))break}return n}},{key:"getMatchedCSSValue",value:function(t,e){for(var n,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];!(n=this._getMatchedCSSValue(t,e))&&null!==(t=t.parentElement)&&r;);return n}}])&&r(e,n),t}();n.default=u},{}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./NodeLocation")),i=o(t("./Util"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}var s,l=Node,f=l.TEXT_NODE,d=l.ELEMENT_NODE,h=l.DOCUMENT_POSITION_FOLLOWING,p=l.DOCUMENT_POSITION_CONTAINED_BY,g=NodeFilter,y=g.SHOW_TEXT,v=g.SHOW_ELEMENT,m=r.default.Type,b=(s=0,function(t){return"".concat(t).concat(++s)}),O=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._ref=e,this._reader=n,this._sel=this._createSel(),this._speechHelper=this._createSpeechHelper(),this._nodes=null}return u(t,[{key:"ref",get:function(){return this._ref}},{key:"sel",get:function(){return this._sel}},{key:"speechHelper",get:function(){return this._speechHelper}},{key:"nodes",get:function(){return this._nodes=this._nodes||this._getNodes(),this._nodes}},{key:"images",get:function(){return Array.from(this.ref.getElementsByTagName("IMG"))}},{key:"_context",get:function(){return this._reader.context}}]),u(t,[{key:"_getNodes",value:function(){for(var t,e=i.default.createNodeIterator(this.ref,y|v,(function(t){return t.nodeType===f||t.nodeType===d&&"IMG"===t.nodeName})),n=[];t=e.nextNode();)n.push(t);return n}},{key:"_createSel",value:function(){return null}},{key:"_createSpeechHelper",value:function(){return null}},{key:"_generateId",value:function(t){var e=t.nodeName,n=Array.from(t.classList).find((function(t){return t.match(new RegExp("".concat(e,"*")))}))||b(e);return t.classList.remove(n),t.classList.add(n),n}},{key:"setHidden",value:function(t,e){var n;"string"==typeof e?(n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(document.getElementsByClassName(e),1)[0])||(n=document.getElementById(e)):n=e,n&&(n.style.visibility=t?"hidden":"")}},{key:"elementFromPoint",value:function(t,e,n){if(this._context.isSameDomAsUi){var r=function(n){return n.getClientRects().toRectList().contains(t,e)};if(n)return Array.from(this.ref.querySelectorAll(n)).find(r)||null;for(var o,a=i.default.createNodeIterator(this.ref,v),c=null;o=a.nextNode();)if(r(o))if(c){var u=c.compareDocumentPosition(o);(u&h||u&p)&&(c=o)}else c=o;return c}var s=document.elementFromPoint(t,e);if(n)for(;s&&s.nodeName.toLowerCase()!==n.toLowerCase();)s=s.parentElement;return s}},{key:"imageFromPoint",value:function(t,e){var n=this.elementFromPoint(t,e,"IMG");return n&&n.src?{id:this._generateId(n),element:n,src:n.src||"null",rect:n.getBoundingClientRect().toRect()}:null}},{key:"svgFromPoint",value:function(t,e){var n=this.elementFromPoint(t,e,"SVG");if(n){var r="<svg";n.attributes.forEach((function(t){r+=" ".concat(t.nodeName,'="').concat(t.nodeValue,'"')})),r+=">";for(var i=document.createElement("svgElement"),o=n.childNodes,a=0;a<o.length;a+=1)i.appendChild(o[a].cloneNode(!0));return{id:this._generateId(i),element:i,html:"".concat(r).concat(i.innerHTML,"</svg>"),rect:i.getBoundingClientRect().toRect()}}return null}},{key:"_getLinkFromNode",value:function(t){for(;t;){var e=t,n=e.nodeName,r=e.href,i=e.attributes;if(t&&"A"===n)return{node:t,href:r,type:(i["epub:type"]||{value:""}).value};t=t.parentNode}return null}},{key:"linkFromPoint",value:function(t,e){if(0===document.links.length)return null;for(var n=t,r=e,i=n-12;i<=n+12;i+=6)for(var o=r-12;o<=r+12;o+=6){var a=this.elementFromPoint(i,o);if(a){var c=this._getLinkFromNode(a);if(null!==c)return c}}return null}},{key:"_reviseImage",value:function(t,e,n){var r=function(t,e){var n,r=parseInt(t,10);if(!isNaN(r)){if(-1!==("string"==typeof(n=t)?n.search(/%/):-1)){if(100<r)return 1;if(r<100)return-1}if(e<r)return 1;if(r<e)return-1}return 0},o=function(){var t,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return r<n?(t=r,e=n):(t=n,e=r),t/e*100},a=i.default.getImageSize(t),c="",u="";if(0===a.nWidth||0===a.nHeight)return{element:t,width:c,height:u,position:"",size:a};(0<r(a.sWidth,a.nWidth)||0<r(a.aWidth,a.nWidth))&&(c="initial"),(0<r(a.sHeight,a.nHeight)||0<r(a.aHeight,a.nHeight))&&(u="initial");var s=0;(a.nWidth>=a.nHeight!=a.dWidth>=a.dHeight||1<Math.abs(o(a.nWidth,a.nHeight)-o(a.dWidth,a.dHeight)))&&(a.dWidth>=a.dHeight&&a.dWidth<a.nWidth?(s=o(a.dWidth,a.nWidth)/100,a.dWidth<e&&Math.round(a.nHeight*s)<n?(c="".concat(a.dWidth,"px"),u="".concat(Math.round(a.nHeight*s),"px")):u=c="initial"):a.dWidth<a.dHeight&&a.dHeight<a.nHeight?(s=o(a.dHeight,a.nHeight)/100,Math.round(a.nWidth*s)<e&&a.dHeight<n?(c="".concat(Math.round(a.nWidth*s),"px"),u="".concat(a.dHeight,"px")):u=c="initial"):u=c="initial");var l=parseInt(c,10)||a.dWidth,f=parseInt(u,10)||a.dHeight;if(e<l||n<f){var d=(this._context.isScrollMode?0:t.offsetTop)+i.default.getStylePropertyValues(t,["line-height","margin-bottom","padding-bottom"]),h=Math.min(e,n)/2,p=Math.max(.95*(n-d),h),g=p/a.nHeight*a.nWidth;e<g&&(p*=e/g,g=e),c="".concat(g,"px"),u="".concat(p,"px")}return{element:t,width:c,height:u,position:"",size:a}}},{key:"_getOffsetDirectionFromElement",value:function(t){var e=this._context.isScrollMode?"top":"left";if(t){var n=i.default.getMatchedCSSValue(t,"position",!0);"left"===e&&"absolute"===n&&(e="top")}return e}},{key:"getPageFromRect",value:function(){return null}},{key:"_getElementById",value:function(t){return 1<this._reader.contents.length||t?this.ref.querySelector("#".concat(t)):document.getElementById(t)}},{key:"_getOffsetFromAnchor",value:function(t,e){var n=this._getElementById(t);if(n){var r=i.default.createTextNodeIterator(n).nextNode();if(r){var o=document.createRange();o.selectNodeContents(r);var a=window.getComputedStyle(n).display,c=o.getClientRects().toRectList().toAbsolute();if(c.length)return e(c[0],n);if("none"===a){n.style.display="block";var u=n.getBoundingClientRect().toRect().toAbsolute();return n.style.display="none",e(u,n)}}return e(n.getBoundingClientRect().toRect().toAbsolute(),n)}return e({left:null,top:null},null)}},{key:"getOffsetFromAnchor",value:function(t){var e=this;return this._getOffsetFromAnchor(t,(function(t,n){return e._context.isScrollMode?null===t.top?null:t.top:null===t.left?null:e.getPageFromRect(t,n)}))}},{key:"getOffsetFromSerializedRange",value:function(t){try{var e=Range.fromSerializedRange(t,this.ref).getClientRects().toRectList().toAbsolute();return 0<e.length?this._context.isScrollMode?e[0].top:this.getPageFromRect(e[0]):null}catch(t){return null}}},{key:"getRectListFromSerializedRange",value:function(t){return Range.fromSerializedRange(t,this.ref).getTextRectList().trim().toAbsolute()}},{key:"_findRectIndex",value:function(t,e,n){for(var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:m.TOP,i=this._context.isScrollMode?"top":"left",o=0;o<t.length;o+=1){var a=t[o];if(r===m.BOTTOM){if(n<=a[i]&&0<a.width)return o-1}else if(e<=a[i]&&a[i]<=n&&0<a.width)return o}return null}},{key:"_findNodeLocation",value:function(t,e){for(var n=this,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:m.TOP,c=this.nodes,u=this._context.isScrollMode,s=null,l=function(l){var d=c[l],h=document.createRange();h.selectNodeContents(d);var p=h.getBoundingClientRect().toRect().toAbsolute();if(p.isEmpty){if("IMG"!==d.nodeName)return"continue";if(h.selectNode(d),(p=h.getBoundingClientRect().toRect().toAbsolute()).isEmpty)return"continue"}if((u?p.maxY:p.maxX)<t)return"continue";var g=void 0;if(d.nodeType===f){var y=d.nodeValue;if(!y)return"continue";for(var v=y.split(i.default.getSplitWordRegex()),m=h.startOffset,b=function(i){var a=v[i];if(a.trim().length){try{h.setStart(d,m),h.setEnd(d,m+a.length)}catch(t){return{v:{v:null}}}var c=h.getClientRects().toRectList().toAbsolute();if(null!==(g=n._findRectIndex(c,t,e,o)))return g<0?(n._reader.lastNodeLocationRect=s.rect,{v:{v:s.location.toString()}}):(n._reader.lastNodeLocationRect=c[g],{v:{v:new r.default(l,Math.min(i+g,v.length-1),o).toString()}});c.reverse().forEach((function(t){t[u?"bottom":"top"]<e&&(s={location:new r.default(l,i,o),rect:t})}))}m+=a.length+1},O=0;O<v.length;O+=1){var _=b(O);if("object"===a(_))return _.v}}else if("IMG"===d.nodeName){var S=h.getClientRects().toRectList().toAbsolute();if(null!==(g=n._findRectIndex(S,t,e,o)))return g<0?(n._reader.lastNodeLocationRect=s.rect,{v:s.location.toString()}):(n._reader.lastNodeLocationRect=S[g],{v:new r.default(l,0,o).toString()});S.reverse().forEach((function(t){t[u?"bottom":"top"]<e&&(s={location:new r.default(l,0,o),rect:t})}))}},d=0;d<c.length;d+=1){var h=l(d);switch(h){case"continue":continue;default:if("object"===a(h))return h.v}}return null}},{key:"getOffsetFromNodeLocation",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:m.TOP;if(null===t)return null;t instanceof r.default&&(t=t.toString());var n=r.default.fromString(t,e),o=n.nodeIndex,a=n.wordIndex;if(-1===o||-1===a)return null;var c=this.nodes[o];if(!c)return null;var u=document.createRange();u.selectNodeContents(c);var s=u.getBoundingClientRect().toRect().toAbsolute();if(s.isEmpty){if("IMG"!==c.nodeName)return null;if(u.selectNode(c),(s=u.getBoundingClientRect().toRect().toAbsolute()).isEmpty)return null}var l=this.getPageFromRect(s);if(null===l||this._reader.totalSize<=this._context.pageUnit*l)return null;if("IMG"===c.nodeName&&0===a)return this._context.isScrollMode?Math.max(s.top-(e===m.BOTTOM?this._context.pageUnit:0),0):l;var f=c.nodeValue;if(null===f)return null;for(var d,h=f.split(i.default.getSplitWordRegex()),p=0,g=0;g<=Math.min(a,h.length-1);g+=1)p+=(d=h[g]).length+1;try{u.setStart(u.startContainer,p-d.length-1),u.setEnd(u.startContainer,p-1)}catch(t){return null}var y=u.getBoundingClientRect().toRect();return s=y.toAbsolute(),null===(l=this.getPageFromRect(s))||this._reader.totalSize<=this._context.pageUnit*l?null:this._context.isScrollMode?Math.max(s.top-(e===m.BOTTOM?this._context.pageUnit:0),0):((y.left<0||(l+1)*this._context.pageUnit<s.maxX)&&(s.width<this._context.pageUnit?l+=1:l+=Math.floor(s.width/this._context.pageUnit)),l)}}]),t}();n.default=O},{"./NodeLocation":3,"./Util":7}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("../common/Util")),i=a(t("./Rect")),o=a(t("./RectList"));function a(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n){return(c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i,o,a=new(Function.bind.apply(t,r));return n&&(i=a,o=n.prototype,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(i,o)),a}).apply(null,arguments)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}var l=Node,f=l.DOCUMENT_POSITION_PRECEDING,d=l.DOCUMENT_POSITION_FOLLOWING,h=l.DOCUMENT_POSITION_CONTAINED_BY,p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._injectMethod(),this._wrapper=document.documentElement,this.context=e,this.debugNodeLocation=!1,this.lastNodeLocationRect=null}return s(t,[{key:"contents",get:function(){return this._contents}},{key:"context",get:function(){return this._context},set:function(t){(this._context=t).shouldViewportInitialize&&this._setViewport()}},{key:"totalWidth",get:function(){return this._wrapper.scrollWidth}},{key:"totalHeight",get:function(){return this._wrapper.scrollHeight}},{key:"totalSize",get:function(){return this.context.isScrollMode?this.totalHeight:this.totalWidth}},{key:"pageXOffset",get:function(){return window.pageXOffset}},{key:"pageYOffset",get:function(){return window.pageYOffset}},{key:"pageOffset",get:function(){return this.context.isScrollMode?this.pageYOffset:this.pageXOffset}},{key:"curPage",get:function(){return this.pageOffset/this.context.pageUnit}}]),s(t,[{key:"setContent",value:function(t,e){this.setContents([t],e)}},{key:"setContents",value:function(t,e){var n=this;this.lastNodeLocationRect=null,this._hideNodeLocation(),this._wrapper=e||document.documentElement,this._contents=[],t.forEach((function(t){n._contents.push(n._createContent(t))}))}},{key:"_createContent",value:function(){return null}},{key:"getContent",value:function(t){return"number"==typeof t?this.contents[t]:this.contents.find((function(e){return e.ref===t}))}},{key:"_injectMethod",value:function(){var t=function(t,e,n){!(3<arguments.length&&void 0!==arguments[3]&&arguments[3])&&t[e]||(t[e]=n)};t(Range.prototype,"getTextRectList",(function(){var t=this.startContainer,e=this.startOffset,n=this.endContainer,i=this.endOffset,o=this.commonAncestorContainer;if(t===n){var a=t.innerText;return void 0!==a&&0===a.length?[]:this.getClientRects().toRectList()}var c=r.default.createTextNodeIterator(o),u=document.createRange();u.setStart(t,e),u.setEnd(t,t.length);for(var s,l=u.getClientRects().toRectList();s=c.nextNode();)if(t.compareDocumentPosition(s)!==f&&t!==s){if(n.compareDocumentPosition(s)===d||n===s)break;(u=document.createRange()).selectNodeContents(s),/^\s*$/.test(u.toString())||(l=l.concat(u.getClientRects().toRectList()))}return(u=document.createRange()).setStart(n,0),u.setEnd(n,i),/^\s*$/.test(u.toString())||(l=l.concat(u.getClientRects().toRectList())),l})),t(Range.prototype,"toSerializedRange",(function(t){return _.serializeRange(this,!0,t)})),t(Range,"fromSerializedRange",(function(t,e){var n=_.deserializeRange(t,e),r=document.createRange();return r.setStart(n.startContainer,n.startOffset),r.setEnd(n.endContainer,n.endOffset),n.detach(),r}));var e=[];try{e.push(DOMRect)}catch(t){}try{e.push(ClientRect)}catch(t){}e.forEach((function(e){e&&t(e.prototype,"toRect",(function(){return new i.default(this)}))}));var n=document.documentElement.getClientRects().constructor;t(n.prototype,"toRectList",(function(){return c(o.default,function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t=o.default.from(this,(function(t){return t.toRect()})))||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}());var t}));var a=this;t(i.default.prototype,"toAbsolute",(function(){var t=a.pageXOffset,e=a.pageYOffset;return a.context.isScrollMode?(this.top+=e,this.bottom+=e):(this.left+=t,this.right+=t),this}),!0)}},{key:"_setViewport",value:function(){var t="width=".concat(this.context.width,", height=").concat(this.context.height,",")+" initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0",e=document.querySelector("meta[name=viewport]");null===e&&((e=document.createElement("meta")).id="viewport",e.name="viewport",document.getElementsByTagName("head")[0].appendChild(e)),e.content=t}},{key:"_hideNodeLocation",value:function(){var t=document.getElementById("node-location-highlight");t&&t.setAttribute("style","display: none !important")}},{key:"_showNodeLocationIfDebug",value:function(){if(this.debugNodeLocation&&null!==this.lastNodeLocationRect){var t="node-location-highlight",e=document.getElementById(t);e||((e=document.createElement("span")).setAttribute("id",t),document.body.appendChild(e));var n=this.lastNodeLocationRect;n[this.context.isScrollMode?"top":"left"]-=this.pageOffset,n[this.context.isScrollMode?"bottom":"right"]-=this.pageOffset,e.style.cssText="position: absolute !important;background-color: red !important;"+"left: ".concat(n.left,"px !important;")+"top: ".concat(n.top,"px !important;")+"width: ".concat(n.width||3,"px !important;")+"height: ".concat(n.height,"px !important;")+"display: block !important;opacity: 0.4 !important;z-index: 99 !important;"}}},{key:"scrollTo",value:function(t){this.context.isScrollMode?window.scroll(0,t):window.scroll(t,0)}},{key:"searchText",value:function(t){if(window.find(t,!1)){var e=getSelection().getRangeAt(0);if(0<e.toString().length){var n=e.startContainer,r=this.contents.find((function(t){return t.ref.compareDocumentPosition(n)&h})).ref;if(r)return e.toSerializedRange(r)}}return null}},{key:"resetSearch",value:function(){getSelection().removeAllRanges()}},{key:"getSurroundingTextForSearchResult",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=getSelection().getRangeAt(0),r=n.startContainer,i=n.startOffset,o=n.endContainer,a=n.endOffset,c=i,u=Math.max(i-t,0),s=a,l=Math.min(u+e,o.length);n.setStart(r,u),n.setEnd(o,l);var f=n.toString();return n.setStart(r,c),n.setEnd(o,s),f}},{key:"getRectListFromSearchResult",value:function(){return getSelection().getRangeAt(0).getClientRects().toRectList().toAbsolute()}},{key:"getPageFromSearchResult",value:function(){var t=getSelection().getRangeAt(0);return this.contents.find((function(e){return e.ref.compareDocumentPosition(t.startContainer)&h})).getPageFromRect(this.getRectListFromSearchResult()[0])}}]),t}();n.default=p},{"../common/Util":7,"./Rect":4,"./RectList":5}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("./SpeechUtil")),i=o(t("../common/Util"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var u=Node,s=u.DOCUMENT_POSITION_FOLLOWING,l=u.DOCUMENT_POSITION_PRECEDING,f=u.TEXT_NODE,d=null,h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._reader=e._reader,this._content=e,this._startContainer=null,this._startOffset=null,this._endContainer=null,this._endOffset=null,this._isOverflowed=!1,this._continueContainer=null,this._continueOffset=null}return c(t,[{key:"isExpandContinuableIntoNextPage",get:function(){return this._isExpandContinuableIntoNextPage(this.getRange())}},{key:"_context",get:function(){return this._reader.context}}]),c(t,[{key:"start",value:function(t,e,n){var r=this._getCaretRange(t,e,n);return null!==r&&(this._expandRangeByWord(r),this._startContainer=r.startContainer,this._startOffset=r.startOffset,this._endContainer=r.endContainer,this._endOffset=r.endOffset,!0)}},{key:"expandIntoUpper",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"character",r=this._getCaretRange(t,e,n,!0);if(null===r)return!1;var i=this._endContainer.compareDocumentPosition(r.startContainer);if(i===s||0===i&&this._endOffset<r.startOffset)return!1;if(r.startContainer===this._startContainer&&r.startOffset===this._startOffset)return!1;r.startContainer.childNodes.length&&r.setStart(r.startContainer.childNodes[r.startOffset],0),r.endContainer.childNodes.length&&r.setEnd(r.endContainer.childNodes[r.endOffset],r.endContainer.childNodes[r.endOffset].textContent.length);var o=document.createRange();return o.setStart(r.startContainer,r.startOffset),o.setEnd(this._endContainer,this._endOffset),!o.collapsed&&!!this._isValid(o)&&(this._startContainer=r.startContainer,this._startOffset=r.startOffset,!0)}},{key:"expandIntoLower",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"character",r=this._getCaretRange(t,e,n,!0);if(null===r)return!1;var i=this._startContainer.compareDocumentPosition(r.endContainer);if(i===l||0===i&&this._startOffset>r.endOffset)return!1;if(r.endContainer===this._endContainer&&r.endOffset===this._endOffset)return!1;if(r.startContainer.childNodes.length&&r.setStart(r.startContainer.childNodes[r.startOffset],0),r.endContainer.childNodes.length&&r.setEnd(r.endContainer.childNodes[r.endOffset],r.endContainer.childNodes[r.endOffset].textContent.length),this._isOutOfBounds(r))return!1;var o=document.createRange();return o.setStart(this._startContainer,this._startOffset),o.setEnd(r.endContainer,r.endOffset),!o.collapsed&&!!this._isValid(o)&&(this._endContainer=r.endContainer,this._endOffset=r.endOffset,!0)}},{key:"expandIntoNextPage",value:function(){return!!this.isExpandContinuableIntoNextPage&&(this._endContainer=this._continueContainer,this._endOffset=this._continueOffset,!0)}},{key:"_getUpperBound",value:function(){return 0}},{key:"_isExpandContinuableIntoNextPage",value:function(t){if(!this._context.isScrollMode){var e=this._getUpperBound(),n=t.cloneRange(),r=n.endContainer,i=n.endOffset;do{for(var o=r.textContent.length;i<o;){if(n.setStart(r,i),n.setEnd(r,i+1),!/\s/.test(n.toString()))return!(this._clientLeftOfRangeForCheckingNextPageContinuable(n)<e||(this._expandRangeBySentence(n,2*e),this._continueContainer=n.endContainer,this._continueOffset=n.endOffset,0));i+=1}i=0}while(r=this._getNextTextNode(n))}return!1}},{key:"_expandRangeByWord",value:function(t){var e=t.startContainer,n=t.endContainer,i=[r.default.chineseCodeTable(),r.default.japaneseCodeTable()];if(r.default.getContainCharRegex(i).test(t.toString()))t.expand("character");else{for(var o=e.nodeValue.length,a=t.startOffset,c=a;0<a;){if(/^\s/.test(t.toString())){t.setStart(e,a+=1);break}a-=1,t.setStart(e,a)}for(;c<o;){if(/\s$/.test(t.toString())){t.setEnd(n,c-=1);break}c+=1,t.setEnd(n,c)}}}},{key:"_expandRangeBySentence",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,n=t.endOffset;if(t.expand("sentence"),!(e<0))for(var r=t.endOffset;n<r&&!(t.getBoundingClientRect().toRect().right<=e);)t.setEnd(t.endContainer,r-=1)}},{key:"_getNextTextNode",value:function(t){var e=t.endContainer.nextSibling;return e?e.nodeType===f?e:i.default.createTextNodeIterator(e).nextNode()||(t.setEnd(e,0),this._getNextTextNode(t)):(t.setEndAfter(t.endContainer),"BODY"===t.endContainer.nodeName?null:this._getNextTextNode(t))}},{key:"_isValid",value:function(t){return t.toString().length>this._maxLength?(this._isOverflowed||this._context.onMessage("최대 ".concat(this._maxLength,"자까지 선택할 수 있습니다.")),this._isOverflowed=!0):this._isOverflowed=!1,!this._isOverflowed}},{key:"_caretRangeFromPoint",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"word";if(this._context.isSameDomAsUi){var r;for(d?d.previousNode():d=i.default.createTextNodeIterator(this._content.ref,(function(n){return!/^\s*$/.test(n.nodeValue)&&n.parentElement.getBoundingClientRect().toRect().contains(t,e)}));r=d.nextNode();){var o=document.createRange();o.selectNodeContents(r);for(var a=i.default.getStylePropertyValue(r.parentElement,"fontSize"),c=i.default.getStylePropertyValue(r.parentElement,"lineHeight"),u=o.toString().length,s=0;s<u-1;s++)if(o.setStart(o.startContainer,s),o.setEnd(o.endContainer,s+1),o.getBoundingClientRect().toRect().inset(0,0,0,Math.max(c-a,0)).contains(t,e))return o.expand(n),o}return d=null}return document.caretRangeFromPoint(t,e)}},{key:"_getCaretRange",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"word",r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=this._caretRangeFromPoint(t,e,this._content.ref,n);return null===i?null:(i.expand(n),!r&&i.collapsed?null:i)}},{key:"_isOutOfBounds",value:function(){return!1}},{key:"getRange",value:function(){var t=document.createRange();return t.setStart(this._startContainer,this._startOffset),t.setEnd(this._endContainer,this._endOffset),t}},{key:"getSerializedRange",value:function(){return this.getRange().toSerializedRange(this._content.ref)}},{key:"getRectList",value:function(){return this.getRange().getTextRectList().trim().toAbsolute()}},{key:"getText",value:function(){return this.getRange().toString()}}]),t}();n.default=h},{"../common/Util":7,"./SpeechUtil":6}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=c(t("../common/_Content")),i=c(t("../common/NodeLocation")),o=c(t("./Sel")),a=c(t("../common/Util"));function c(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=i.default.Type,h=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,l(e).apply(this,arguments))}var n,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,r.default),n=e,(c=[{key:"_createSel",value:function(){return new o.default(this)}},{key:"reviseImages",value:function(t){var e=this,n=this._context,r=n.width,i=n.height,o=[],a=this.images,c=function(){if(a.length===o.length){var n=[];o.forEach((function(t){var o=e._reviseImage(t,r,i),a=o.width,c=o.height,u=o.position;(a.length||c.length||u.length)&&n.push({element:t,width:a,height:c,position:u})})),n.forEach((function(t){var e=t.element,n=t.width,r=t.height,i=t.position;n.length&&(e.style.width=n),r.length&&(e.style.height=r),i.length&&(e.style.position=i)})),t&&setTimeout((function(){t()}),0)}};a.forEach((function(t){t.complete?o.push(t):(t.addEventListener("load",(function(){o.push(t),c()})),t.addEventListener("error",(function(){o.push(null),c()})))})),c()}},{key:"getPageFromRect",value:function(t){return null===t?null:this._context.isScrollMode?Math.floor(t.top/this._context.pageHeightUnit)+1:Math.floor(t.left/this._context.pageWidthUnit)+1}},{key:"getPageFromAnchor",value:function(t){var e=this;return this._getOffsetFromAnchor(t,(function(t,n){return null===t.left||null===t.top?null:e.getPageFromRect(t,n)}))}},{key:"getPageFromSerializedRange",value:function(t){var e=this.getOffsetFromSerializedRange(t),n=this._context,r=n.isScrollMode,i=n.pageHeightUnit;return r&&null!==e?Math.floor(e/i)+1:e}},{key:"getPageFromNodeLocation",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d.TOP,n=this.getOffsetFromNodeLocation(t,e),r=this._context,i=r.isScrollMode,o=r.pageHeightUnit;return i&&null!==n?Math.floor(n/o)+1:n}},{key:"getCurrentNodeLocation",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:d.TOP,e=(a.default.getStylePropertyValue(document.documentElement,"width")-a.default.getStylePropertyValue(this._ref,"width"))/2,n=this._context,r=n.isScrollMode,o=n.pageUnit,c=this._reader.pageOffset+(r?0:e),u=c+o,s=new i.default(-1,-1,t).toString(),l=this._findNodeLocation(c,u,t);return this._reader._showNodeLocationIfDebug(),l||s}}])&&s(n.prototype,c),e}();n.default=h},{"../common/NodeLocation":3,"../common/Util":7,"../common/_Content":8,"./Sel":13}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(t("../common/_Reader")),i=o(t("./Content"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,s(e).apply(this,arguments))}var n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,r.default),n=e,(o=[{key:"_createContent",value:function(t){return new i.default(t,this)}},{key:"searchText",value:function(t){var n=u(s(e.prototype),"searchText",this).call(this,t);return n?{serializedRange:n,rectList:this.getRectListFromSearchResult(),text:this.getSurroundingTextForSearchResult(),page:this.getPageFromSearchResult()}:null}},{key:"pageXOffset",get:function(){return this._wrapper.parentElement.scrollLeft}},{key:"curPage",get:function(){return u(s(e.prototype),"curPage",this)+1}}])&&c(n.prototype,o),e}();n.default=f},{"../common/_Reader":9,"./Content":11}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=t("../common/_Sel"))&&r.__esModule?r:{default:r};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,a(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,i.default),e}();n.default=u},{"../common/_Sel":10}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Context",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"NodeLocation",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(n,"Reader",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(n,"Rect",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"RectList",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(n,"Util",{enumerable:!0,get:function(){return u.default}}),n.default=void 0;var r=s(t("../common/Context")),i=s(t("../common/NodeLocation")),o=s(t("./Reader")),a=s(t("../common/Rect")),c=s(t("../common/RectList")),u=s(t("../common/Util"));function s(t){return t&&t.__esModule?t:{default:t}}var l={Context:r.default,NodeLocation:i.default,Reader:o.default,Rect:a.default,RectList:c.default,Util:u.default};n.default=l},{"../common/Context":1,"../common/NodeLocation":3,"../common/Rect":4,"../common/RectList":5,"../common/Util":7,"./Reader":12}]},{},[14])(14),"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return o;i++}},configurable:!0,writable:!0}),Array.from||(Array.from=(i=Object.prototype.toString,o=function(t){return"function"==typeof t||"[object Function]"===i.call(t)},a=Math.pow(2,53)-1,c=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),a)},function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,r=1<arguments.length?arguments[1]:void 0;if(void 0!==r){if(!o(r))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=arguments[2])}for(var i,a=c(e.length),u=o(this)?Object(new this(a)):new Array(a),s=0;s<a;)i=e[s],u[s]=r?void 0===n?r(i,s):r.call(n,i,s):i,s+=1;return u.length=a,u})),"function"!=typeof window.getMatchedCSSRules){var u=/[\w-]+/g,s=/#[\w-]+/g,l=/\.[\w-]+/g,f=/\[[^\]]+\]/g,d=/\:(?!not)[\w-]+(\(.*\))?/g,h=/\:\:?(after|before|first-letter|first-line|selection)/g;function p(t){return[].slice.call(t||[])}function g(t){var e=t.media&&t.media.mediaText;return t.disabled?[]:e&&e.length&&!window.matchMedia(e).matches?[]:p(t.cssRules)}function y(t,e){return t.match(e),e?e.length:0}function v(t){for(var e,n,r=[0,0,0],i=t.split(" ");"string"==typeof(e=i.shift());)n=y(e,h),(r[2]=n)&&(e=e.replace(h,"")),n=y(e,d),(r[1]=n)&&(e=e.replace(d,"")),n=y(e,f),r[1]+=n,n&&(e=e.replace(f,"")),n=y(e,s),(r[0]=n)&&(e=e.replace(s,"")),n=y(e,l),r[1]+=n,n&&(e=e.replace(l,"")),r[2]+=y(e,u);return parseInt(r.join(""),10)}function m(t,e){for(var n,r,i=e.split(","),o=0;n=i.shift();)t.webkitMatchesSelector(n)&&(o=o<(r=v(n))?r:o);return o}window.getMatchedCSSRules=function(t){var e,n,r,i,o=[];for(e=p(window.document.styleSheets);n=e.shift();)for(r=g(n);i=r.shift();)i.styleSheet?r=g(i.styleSheet).concat(r):i.media?r=g(i).concat(r):i.selectorText&&0!==i.selectorText.length&&t.webkitMatchesSelector(i.selectorText)&&o.push(i);return function(t,e){return e.sort((function(e,n){return m(t,n.selectorText)-m(t,e.selectorText)}))}(t,o)}}var b,O=(b=null,function(t){for(var e=function(t){for(var e,n=[],r=0,i=t.length;r<i;++r)(e=t.charCodeAt(r))<128?n.push(e):e<2048?n.push(e>>6|192,63&e|128):n.push(e>>12|224,e>>6&63|128,63&e|128);return n}(t),n=-1,r=(b||(b=function(){for(var t,e,n=[],r=0;r<256;++r){for(e=r,t=8;t--;)1==(1&e)?e=e>>>1^3988292384:e>>>=1;n[r]=e>>>0}return n}()),b),i=0,o=e.length;i<o;++i)n=n>>>8^r[255&(n^e[i])];return(-1^n)>>>0}),_={nodeToInfoString:function(t,e){var n=function(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")};e=e||[];var r=t.nodeType,i=t.childNodes,o=i.length,a=[r,t.nodeName,o].join(":"),c="",u="";switch(r){case 3:c=n(t.nodeValue);break;case 8:c="\x3c!--"+n(t.nodeValue)+"--\x3e";break;default:c="<"+a+">",u="</>"}c&&e.push(c);for(var s=0;s<o;++s)_.nodeToInfoString(i[s],e);return u&&e.push(u),e},getElementChecksum:function(t){var e=_.nodeToInfoString(t).join("");return O(e).toString(16)},getDocument:function(t){if(9==t.nodeType)return t;if(void 0!==t.ownerDocument)return t.ownerDocument;if(void 0!==t.document)return t.document;if(t.parentNode)return _.getDocument(t.parentNode);throw new Error("Error in Rangy: getDocument: no document found for node")},getNodeIndex:function(t){for(var e=0;t=t.previousSibling;)++e;return e},getNodeLength:function(t){switch(t.nodeType){case 7:case 10:return 0;case 3:case 8:return t.length;default:return t.childNodes.length}},serializePosition:function(t,e,n){var r=[],i=t;for(n=n||_.getDocument(t).documentElement;i&&i!=n;)r.push(_.getNodeIndex(i,!0)),i=i.parentNode;return r.join("/")+":"+e},serializeRange:function(t,e,n){if(!function(t,e,n){for(var r=e;r;){if(r===t)return!0;r=r.parentNode}return!1}(n=n||_.getDocument(t).startContainer,t.commonAncestorContainer))throw new Error("Error in Rangy: serializeRange(): range is not wholly contained within specified root node.");var r=_.serializePosition(t.startContainer,t.startOffset,n)+","+_.serializePosition(t.endContainer,t.endOffset,n);return e||(r+="{"+_.getElementChecksum(n)+"}"),r},deserializePosition:function(t,e,n){e||(e=(n||document).documentElement);for(var r,i=t.split(":"),o=e,a=i[0]?i[0].split("/"):[],c=a.length;c--;){if(!((r=parseInt(a[c],10))<o.childNodes.length))throw new Error("Error in Rangy: deserializePosition() failed: node has no child with index "+r+", "+c+".");o=o.childNodes[r]}return{node:o,offset:parseInt(i[1],10)}},deserializeRegex:/^([^,]+),([^,\{]+)(\{([^}]+)\})?$/,deserializeRange:function(t,e,n){e?n=n||_.getDocument(e):e=(n=n||document).documentElement;var r,i=_.deserializeRegex.exec(t),o=i[4];if(o&&o!==(r=_.getElementChecksum(e)))throw new Error("deserializeRange: checksums of serialized range root node ("+o+") and target root node ("+r+") do not match");var a=_.deserializePosition(i[1],e,n),c=_.deserializePosition(i[2],e,n),u=document.createRange();return u.setStart(a.node,a.offset),u.setEnd(c.node,c.offset),u},canDeserializeRange:function(t,e,n){e||(e=(n||document).documentElement);var r=_.deserializeRegex.exec(t)[3];return!r||r===_.getElementChecksum(e)}}},function(t,e,n){var r=n(17),i=n(18),o=n(19);t.exports=function(t,e){return r(t)||i(t,e)||o()}},function(t,e,n){"use strict";n.r(e),n.d(e,"SettingUtil",(function(){return c}));var r=n(9);n.d(e,"Context",(function(){return r.Context})),n.d(e,"Rect",(function(){return r.Rect})),n.d(e,"RectList",(function(){return r.RectList}));var i=n(6);n.d(e,"ComicSettingUtil",(function(){return i}));var o=n(5);n.d(e,"EpubSettingUtil",(function(){return o}));var a=n(4);n.d(e,"Util",(function(){return a}));var c=o},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new P(r||[]);return o._invoke=function(t,e,n){var r=l;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return j()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=s(t,e,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",d="executing",h="completed",p={};function g(){}function y(){}function v(){}var m={};m[o]=function(){return this};var b=Object.getPrototypeOf,O=b&&b(b(T([])));O&&O!==n&&r.call(O,o)&&(m=O);var _=v.prototype=g.prototype=Object.create(m);function S(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function w(t){var e;this._invoke=function(n,i){function o(){return new Promise((function(e,o){!function e(n,i,o,a){var c=s(t[n],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return e("throw",t,o,a)}))}a(c.arg)}(n,i,e,o)}))}return e=e?e.then(o,o):o()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=s(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function T(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:j}}function j(){return{value:e,done:!0}}return y.prototype=_.constructor=v,v.constructor=y,v[c]=y.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},S(w.prototype),w.prototype[a]=function(){return this},t.AsyncIterator=w,t.async=function(e,n,r,i){var o=new w(u(e,n,r,i));return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(_),_[c]="Generator",_[o]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return c.type="throw",c.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function c(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var c=new a(n,r||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],c]:t._events[u].push(c):(t._events[u]=c,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function s(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},s.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},s.prototype.emit=function(t,e,n,r,o,a){var c=i?i+t:t;if(!this._events[c])return!1;var u,s,l=this._events[c],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,o),!0;case 6:return l.fn.call(l.context,e,n,r,o,a),!0}for(s=1,u=new Array(f-1);s<f;s++)u[s-1]=arguments[s];l.fn.apply(l.context,u)}else{var d,h=l.length;for(s=0;s<h;s++)switch(l[s].once&&this.removeListener(t,l[s].fn,void 0,!0),f){case 1:l[s].fn.call(l[s].context);break;case 2:l[s].fn.call(l[s].context,e);break;case 3:l[s].fn.call(l[s].context,e,n);break;case 4:l[s].fn.call(l[s].context,e,n,r);break;default:if(!u)for(d=1,u=new Array(f-1);d<f;d++)u[d-1]=arguments[d];l[s].fn.apply(l[s].context,u)}}return!0},s.prototype.on=function(t,e,n){return c(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return c(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var c=0,s=[],l=a.length;c<l;c++)(a[c].fn!==e||r&&!a[c].once||n&&a[c].context!==n)&&s.push(a[c]);s.length?this._events[o]=1===s.length?s[0]:s:u(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=i,s.EventEmitter=s,t.exports=s},function(t,e,n){var r=n(29),i=n(30),o=n(31);t.exports=function(t){return r(t)||i(t)||o()}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,s=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?s=u.concat(s):f=-1,s.length&&h())}function h(){if(!l){var t=c(d);l=!0;for(var e=s.length;e;){for(u=s,s=[];++f<e;)u&&u[f].run();f=-1,e=s.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new p(t,e)),1!==s.length||l||c(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){},function(t,e,n){"use strict";var r=n(23),i=n(25);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=b(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,s=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(s),f=["%","/","?",";","#"].concat(l),d=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=n(26);function b(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),c=-1!==o&&o<t.indexOf("#")?"?":"#",s=t.split(c);s[0]=s[0].replace(/\\/g,"/");var b=t=s.join(c);if(b=b.trim(),!n&&1===t.split("#").length){var O=u.exec(b);if(O)return this.path=b,this.href=b,this.pathname=O[1],O[2]?(this.search=O[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var _=a.exec(b);if(_){var S=(_=_[0]).toLowerCase();this.protocol=S,b=b.substr(_.length)}if(n||_||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===b.substr(0,2);!w||_&&y[_]||(b=b.substr(2),this.slashes=!0)}if(!y[_]&&(w||_&&!v[_])){for(var E,x,C=-1,P=0;P<d.length;P++){-1!==(T=b.indexOf(d[P]))&&(-1===C||T<C)&&(C=T)}-1!==(x=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C))&&(E=b.slice(0,x),b=b.slice(x+1),this.auth=decodeURIComponent(E)),C=-1;for(P=0;P<f.length;P++){var T;-1!==(T=b.indexOf(f[P]))&&(-1===C||T<C)&&(C=T)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var A=this.hostname.split(/\./),R=(P=0,A.length);P<R;P++){var k=A[P];if(k&&!k.match(h)){for(var N="",I=0,L=k.length;I<L;I++)k.charCodeAt(I)>127?N+="x":N+=k[I];if(!N.match(h)){var M=A.slice(0,P),$=A.slice(P+1),D=k.match(p);D&&(M.push(D[1]),$.unshift(D[2])),$.length&&(b="/"+$.join(".")+b),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+U,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!g[S])for(P=0,R=l.length;P<R;P++){var z=l[P];if(-1!==b.indexOf(z)){var W=encodeURIComponent(z);W===z&&(W=escape(z)),b=b.split(z).join(W)}}var F=b.indexOf("#");-1!==F&&(this.hash=b.substr(F),b=b.slice(0,F));var G=b.indexOf("?");if(-1!==G?(this.search=b.substr(G),this.query=b.substr(G+1),e&&(this.query=m.parse(this.query)),b=b.slice(0,G)):e&&(this.search="",this.query={}),b&&(this.pathname=b),v[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var B=this.search||"";this.path=U+B}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=m.stringify(this.query));var c=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),c&&"?"!==c.charAt(0)&&(c="?"+c),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(c=c.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var c=r[a];n[c]=this[c]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),s=0;s<u.length;s++){var l=u[s];"protocol"!==l&&(n[l]=t[l])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var f=Object.keys(t),d=0;d<f.length;d++){var h=f[d];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var g=n.pathname||"",m=n.search||"";n.path=g+m}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),O=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=O||b||n.host&&t.pathname,S=_,w=n.pathname&&n.pathname.split("/")||[],E=(p=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),_=_&&(""===p[0]||""===w[0])),O)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(E)n.hostname=n.host=w.shift(),(j=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=j.shift(),n.host=n.hostname=j.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=w.slice(-1)[0],C=(n.host||t.host||w.length>1)&&("."===x||".."===x)||""===x,P=0,T=w.length;T>=0;T--)"."===(x=w[T])?w.splice(T,1):".."===x?(w.splice(T,1),P++):P&&(w.splice(T,1),P--);if(!_&&!S)for(;P--;P)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),C&&"/"!==w.join("/").substr(-1)&&w.push("");var j,A=""===w[0]||w[0]&&"/"===w[0].charAt(0);E&&(n.hostname=n.host=A?"":w.length?w.shift():"",(j=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=j.shift(),n.host=n.hostname=j.shift()));return(_=_||n.host&&w.length)&&!A&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var c,u=2147483647,s=36,l=1,f=26,d=38,h=700,p=72,g=128,y="-",v=/^xn--/,m=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=s-l,S=Math.floor,w=String.fromCharCode;function E(t){throw new RangeError(O[t])}function x(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function C(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+x((t=t.replace(b,".")).split("."),e).join(".")}function P(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function T(t){return x(t,(function(t){var e="";return t>65535&&(e+=w((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=w(t)})).join("")}function j(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function A(t,e,n){var r=0;for(t=n?S(t/h):t>>1,t+=S(t/e);t>_*f>>1;r+=s)t=S(t/_);return S(r+(_+1)*t/(t+d))}function R(t){var e,n,r,i,o,a,c,d,h,v,m,b=[],O=t.length,_=0,w=g,x=p;for((n=t.lastIndexOf(y))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&E("not-basic"),b.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<O;){for(o=_,a=1,c=s;i>=O&&E("invalid-input"),((d=(m=t.charCodeAt(i++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:s)>=s||d>S((u-_)/a))&&E("overflow"),_+=d*a,!(d<(h=c<=x?l:c>=x+f?f:c-x));c+=s)a>S(u/(v=s-h))&&E("overflow"),a*=v;x=A(_-o,e=b.length+1,0==o),S(_/e)>u-w&&E("overflow"),w+=S(_/e),_%=e,b.splice(_++,0,w)}return T(b)}function k(t){var e,n,r,i,o,a,c,d,h,v,m,b,O,_,x,C=[];for(b=(t=P(t)).length,e=g,n=0,o=p,a=0;a<b;++a)(m=t[a])<128&&C.push(w(m));for(r=i=C.length,i&&C.push(y);r<b;){for(c=u,a=0;a<b;++a)(m=t[a])>=e&&m<c&&(c=m);for(c-e>S((u-n)/(O=r+1))&&E("overflow"),n+=(c-e)*O,e=c,a=0;a<b;++a)if((m=t[a])<e&&++n>u&&E("overflow"),m==e){for(d=n,h=s;!(d<(v=h<=o?l:h>=o+f?f:h-o));h+=s)x=d-v,_=s-v,C.push(w(j(v+x%_,0))),d=S(x/_);C.push(w(j(d,0))),o=A(n,O,r==i),n=0,++r}++n,++e}return C.join("")}c={version:"1.4.1",ucs2:{decode:P,encode:T},decode:R,encode:k,toASCII:function(t){return C(t,(function(t){return m.test(t)?"xn--"+k(t):t}))},toUnicode:function(t){return C(t,(function(t){return v.test(t)?R(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return c}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(24)(t),n(13))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(27),e.encode=e.stringify=n(28)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var c=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var s=t.length;u>0&&s>u&&(s=u);for(var l=0;l<s;++l){var f,d,h,p,g=t[l].replace(c,"%20"),y=g.indexOf(n);y>=0?(f=g.substr(0,y),d=g.substr(y+1)):(f=g,d=""),h=decodeURIComponent(f),p=decodeURIComponent(d),r(a,h)?i(a[h])?a[h].push(p):a[h]=[a[h],p]:a[h]=p}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,c){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),(function(a){var c=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],(function(t){return c+encodeURIComponent(r(t))})).join(e):c+encodeURIComponent(r(t[a]))})).join(e):c?encodeURIComponent(r(c))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"Page",(function(){return Vt})),n.d(r,"ViewType",(function(){return zt})),n.d(r,"ViewTypeOptional",(function(){return Wt})),n.d(r,"BindingType",(function(){return Ft})),n.d(r,"BindingTypeOptional",(function(){return Gt}));var i={};n.r(i),n.d(i,"ImageCalculationContext",(function(){return Pe})),n.d(i,"CalculationState",(function(){return Te})),n.d(i,"CurrentState",(function(){return je})),n.d(i,"SettingState",(function(){return Ae})),n.d(i,"ImageData",(function(){return Re})),n.d(i,"ComicParsedData",(function(){return ke}));var o={};n.r(o),n.d(o,"SpineCalculationState",(function(){return Le})),n.d(o,"CalculationState",(function(){return Me})),n.d(o,"CurrentState",(function(){return $e})),n.d(o,"SettingState",(function(){return De})),n.d(o,"FontData",(function(){return Ue})),n.d(o,"EpubParsedData",(function(){return Ve}));var a=n(10),c=n.n(a),u=n(14),s=n.n(u),l=n(3);var f=function(){function t(t){this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.before=null}var e=t.prototype;return e.insert=function(t){if(this.ctr%(this.isSpeedy?65e3:1)==0){var e,n=function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e}(this);e=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(n,e),this.tags.push(n)}var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(r);try{var o=105===t.charCodeAt(1)&&64===t.charCodeAt(0);i.insertRule(t,o?0:i.cssRules.length)}catch(t){0}}else r.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}();var d=function(t){function e(t,e,r){var i=e.trim().split(p);e=i;var o=i.length,a=t.length;switch(a){case 0:case 1:var c=0;for(t=0===a?"":t[0]+" ";c<o;++c)e[c]=n(t,e[c],r).trim();break;default:var u=c=0;for(e=[];c<o;++c)for(var s=0;s<a;++s)e[u++]=n(t[s]+" ",i[c],r).trim()}return e}function n(t,e,n){var r=e.charCodeAt(0);switch(33>r&&(r=(e=e.trim()).charCodeAt(0)),r){case 38:return e.replace(g,"$1"+t.trim());case 58:return t.trim()+e.replace(g,"$1"+t.trim());default:if(0<1*n&&0<e.indexOf("\f"))return e.replace(g,(58===t.charCodeAt(0)?"":"$1")+t.trim())}return t+e}function r(t,e,n,o){var a=t+";",c=2*e+3*n+4*o;if(944===c){t=a.indexOf(":",9)+1;var u=a.substring(t,a.length-1).trim();return u=a.substring(0,t).trim()+u+";",1===j||2===j&&i(u,1)?"-webkit-"+u+u:u}if(0===j||2===j&&!i(a,1))return a;switch(c){case 1015:return 97===a.charCodeAt(10)?"-webkit-"+a+a:a;case 951:return 116===a.charCodeAt(3)?"-webkit-"+a+a:a;case 963:return 110===a.charCodeAt(5)?"-webkit-"+a+a:a;case 1009:if(100!==a.charCodeAt(4))break;case 969:case 942:return"-webkit-"+a+a;case 978:return"-webkit-"+a+"-moz-"+a+a;case 1019:case 983:return"-webkit-"+a+"-moz-"+a+"-ms-"+a+a;case 883:if(45===a.charCodeAt(8))return"-webkit-"+a+a;if(0<a.indexOf("image-set(",11))return a.replace(x,"$1-webkit-$2")+a;break;case 932:if(45===a.charCodeAt(4))switch(a.charCodeAt(5)){case 103:return"-webkit-box-"+a.replace("-grow","")+"-webkit-"+a+"-ms-"+a.replace("grow","positive")+a;case 115:return"-webkit-"+a+"-ms-"+a.replace("shrink","negative")+a;case 98:return"-webkit-"+a+"-ms-"+a.replace("basis","preferred-size")+a}return"-webkit-"+a+"-ms-"+a+a;case 964:return"-webkit-"+a+"-ms-flex-"+a+a;case 1023:if(99!==a.charCodeAt(8))break;return"-webkit-box-pack"+(u=a.substring(a.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+a+"-ms-flex-pack"+u+a;case 1005:return d.test(a)?a.replace(f,":-webkit-")+a.replace(f,":-moz-")+a:a;case 1e3:switch(e=(u=a.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(e)){case 226:u=a.replace(b,"tb");break;case 232:u=a.replace(b,"tb-rl");break;case 220:u=a.replace(b,"lr");break;default:return a}return"-webkit-"+a+"-ms-"+u+a;case 1017:if(-1===a.indexOf("sticky",9))break;case 975:switch(e=(a=t).length-10,c=(u=(33===a.charCodeAt(e)?a.substring(0,e):a).substring(t.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:a=a.replace(u,"-webkit-"+u)+";"+a;break;case 207:case 102:a=a.replace(u,"-webkit-"+(102<c?"inline-":"")+"box")+";"+a.replace(u,"-webkit-"+u)+";"+a.replace(u,"-ms-"+u+"box")+";"+a}return a+";";case 938:if(45===a.charCodeAt(5))switch(a.charCodeAt(6)){case 105:return u=a.replace("-items",""),"-webkit-"+a+"-webkit-box-"+u+"-ms-flex-"+u+a;case 115:return"-webkit-"+a+"-ms-flex-item-"+a.replace(S,"")+a;default:return"-webkit-"+a+"-ms-flex-line-pack"+a.replace("align-content","").replace(S,"")+a}break;case 973:case 989:if(45!==a.charCodeAt(3)||122===a.charCodeAt(4))break;case 931:case 953:if(!0===E.test(t))return 115===(u=t.substring(t.indexOf(":")+1)).charCodeAt(0)?r(t.replace("stretch","fill-available"),e,n,o).replace(":fill-available",":stretch"):a.replace(u,"-webkit-"+u)+a.replace(u,"-moz-"+u.replace("fill-",""))+a;break;case 962:if(a="-webkit-"+a+(102===a.charCodeAt(5)?"-ms-"+a:"")+a,211===n+o&&105===a.charCodeAt(13)&&0<a.indexOf("transform",10))return a.substring(0,a.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+a}return a}function i(t,e){var n=t.indexOf(1===e?":":"{"),r=t.substring(0,3!==e?n:10);return n=t.substring(n+1,t.length-1),N(2!==e?r:r.replace(w,"$1"),n,e)}function o(t,e){var n=r(e,e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2));return n!==e+";"?n.replace(_," or ($1)").substring(4):"("+e+")"}function a(t,e,n,r,i,o,a,c,s,l){for(var f,d=0,h=e;d<k;++d)switch(f=R[d].call(u,t,h,n,r,i,o,a,c,s,l)){case void 0:case!1:case!0:case null:break;default:h=f}if(h!==e)return h}function c(t){return void 0!==(t=t.prefix)&&(N=null,t?"function"!=typeof t?j=1:(j=2,N=t):j=0),c}function u(t,n){var c=t;if(33>c.charCodeAt(0)&&(c=c.trim()),c=[c],0<k){var u=a(-1,n,c,c,P,C,0,0,0,0);void 0!==u&&"string"==typeof u&&(n=u)}var f=function t(n,c,u,f,d){for(var h,p,g,b,_,S=0,w=0,E=0,x=0,R=0,N=0,L=g=h=0,M=0,$=0,D=0,U=0,V=u.length,z=V-1,W="",F="",G="",B="";M<V;){if(p=u.charCodeAt(M),M===z&&0!==w+x+E+S&&(0!==w&&(p=47===w?10:47),x=E=S=0,V++,z++),0===w+x+E+S){if(M===z&&(0<$&&(W=W.replace(l,"")),0<W.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:W+=u.charAt(M)}p=59}switch(p){case 123:for(h=(W=W.trim()).charCodeAt(0),g=1,U=++M;M<V;){switch(p=u.charCodeAt(M)){case 123:g++;break;case 125:g--;break;case 47:switch(p=u.charCodeAt(M+1)){case 42:case 47:t:{for(L=M+1;L<z;++L)switch(u.charCodeAt(L)){case 47:if(42===p&&42===u.charCodeAt(L-1)&&M+2!==L){M=L+1;break t}break;case 10:if(47===p){M=L+1;break t}}M=L}}break;case 91:p++;case 40:p++;case 34:case 39:for(;M++<z&&u.charCodeAt(M)!==p;);}if(0===g)break;M++}switch(g=u.substring(U,M),0===h&&(h=(W=W.replace(s,"").trim()).charCodeAt(0)),h){case 64:switch(0<$&&(W=W.replace(l,"")),p=W.charCodeAt(1)){case 100:case 109:case 115:case 45:$=c;break;default:$=A}if(U=(g=t(c,$,g,p,d+1)).length,0<k&&(_=a(3,g,$=e(A,W,D),c,P,C,U,p,d,f),W=$.join(""),void 0!==_&&0===(U=(g=_.trim()).length)&&(p=0,g="")),0<U)switch(p){case 115:W=W.replace(O,o);case 100:case 109:case 45:g=W+"{"+g+"}";break;case 107:g=(W=W.replace(y,"$1 $2"))+"{"+g+"}",g=1===j||2===j&&i("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=W+g,112===f&&(F+=g,g="")}else g="";break;default:g=t(c,e(c,W,D),g,f,d+1)}G+=g,g=D=$=L=h=0,W="",p=u.charCodeAt(++M);break;case 125:case 59:if(1<(U=(W=(0<$?W.replace(l,""):W).trim()).length))switch(0===L&&(h=W.charCodeAt(0),45===h||96<h&&123>h)&&(U=(W=W.replace(" ",":")).length),0<k&&void 0!==(_=a(1,W,c,n,P,C,F.length,f,d,f))&&0===(U=(W=_.trim()).length)&&(W="\0\0"),h=W.charCodeAt(0),p=W.charCodeAt(1),h){case 0:break;case 64:if(105===p||99===p){B+=W+u.charAt(M);break}default:58!==W.charCodeAt(U-1)&&(F+=r(W,h,p,W.charCodeAt(2)))}D=$=L=h=0,W="",p=u.charCodeAt(++M)}}switch(p){case 13:case 10:47===w?w=0:0===1+h&&107!==f&&0<W.length&&($=1,W+="\0"),0<k*I&&a(0,W,c,n,P,C,F.length,f,d,f),C=1,P++;break;case 59:case 125:if(0===w+x+E+S){C++;break}default:switch(C++,b=u.charAt(M),p){case 9:case 32:if(0===x+S+w)switch(R){case 44:case 58:case 9:case 32:b="";break;default:32!==p&&(b=" ")}break;case 0:b="\\0";break;case 12:b="\\f";break;case 11:b="\\v";break;case 38:0===x+w+S&&($=D=1,b="\f"+b);break;case 108:if(0===x+w+S+T&&0<L)switch(M-L){case 2:112===R&&58===u.charCodeAt(M-3)&&(T=R);case 8:111===N&&(T=N)}break;case 58:0===x+w+S&&(L=M);break;case 44:0===w+E+x+S&&($=1,b+="\r");break;case 34:case 39:0===w&&(x=x===p?0:0===x?p:x);break;case 91:0===x+w+E&&S++;break;case 93:0===x+w+E&&S--;break;case 41:0===x+w+S&&E--;break;case 40:if(0===x+w+S){if(0===h)switch(2*R+3*N){case 533:break;default:h=1}E++}break;case 64:0===w+E+x+S+L+g&&(g=1);break;case 42:case 47:if(!(0<x+S+E))switch(w){case 0:switch(2*p+3*u.charCodeAt(M+1)){case 235:w=47;break;case 220:U=M,w=42}break;case 42:47===p&&42===R&&U+2!==M&&(33===u.charCodeAt(U+2)&&(F+=u.substring(U,M+1)),b="",w=0)}}0===w&&(W+=b)}N=R,R=p,M++}if(0<(U=F.length)){if($=c,0<k&&(void 0!==(_=a(2,F,$,n,P,C,U,f,d,f))&&0===(F=_).length))return B+F+G;if(F=$.join(",")+"{"+F+"}",0!=j*T){switch(2!==j||i(F,2)||(T=0),T){case 111:F=F.replace(m,":-moz-$1")+F;break;case 112:F=F.replace(v,"::-webkit-input-$1")+F.replace(v,"::-moz-$1")+F.replace(v,":-ms-input-$1")+F}T=0}}return B+F+G}(A,c,n,0,0);return 0<k&&(void 0!==(u=a(-2,f,c,c,P,C,f.length,0,0,0))&&(f=u)),"",T=0,C=P=1,f}var s=/^\0+/g,l=/[\0\r\f]/g,f=/: */g,d=/zoo|gra/,h=/([,: ])(transform)/g,p=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,m=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,O=/\(\s*(.*)\s*\)/g,_=/([\s\S]*?);/g,S=/-self|flex-/g,w=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,x=/([^-])(image-set\()/,C=1,P=1,T=0,j=1,A=[],R=[],k=0,N=null,I=0;return u.use=function t(e){switch(e){case void 0:case null:k=R.length=0;break;default:if("function"==typeof e)R[k++]=e;else if("object"==typeof e)for(var n=0,r=e.length;n<r;++n)t(e[n]);else I=0|!!e}return t},u.set=c,void 0!==t&&c(t),u};function h(t){t&&p.current.insert(t+"}")}var p={current:null},g=function(t,e,n,r,i,o,a,c,u,s){switch(t){case 1:switch(e.charCodeAt(0)){case 64:return p.current.insert(e+";"),"";case 108:if(98===e.charCodeAt(2))return""}break;case 2:if(0===c)return e+"/*|*/";break;case 3:switch(c){case 102:case 112:return p.current.insert(n[0]+e),"";default:return e+(0===s?"/*|*/":"")}case-2:e.split("/*|*/}").forEach(h)}},y=function(t){void 0===t&&(t={});var e,n=t.key||"css";void 0!==t.prefix&&(e={prefix:t.prefix});var r=new d(e);var i,o={};i=t.container||document.head;var a,c=document.querySelectorAll("style[data-emotion-"+n+"]");Array.prototype.forEach.call(c,(function(t){t.getAttribute("data-emotion-"+n).split(" ").forEach((function(t){o[t]=!0})),t.parentNode!==i&&i.appendChild(t)})),r.use(t.stylisPlugins)(g),a=function(t,e,n,i){var o=e.name;p.current=n,r(t,e.styles),i&&(u.inserted[o]=!0)};var u={key:n,sheet:new f({key:n,container:i,nonce:t.nonce,speedy:t.speedy}),nonce:t.nonce,inserted:o,registered:{},insert:a};return u};function v(t,e,n){var r="";return n.split(" ").forEach((function(n){void 0!==t[n]?e.push(t[n]):r+=n+" "})),r}var m=function(t,e,n){var r=t.key+"-"+e.name;if(!1===n&&void 0===t.registered[r]&&(t.registered[r]=e.styles),void 0===t.inserted[e.name]){var i=e;do{t.insert("."+r,i,t.sheet,!0);i=i.next}while(void 0!==i)}};var b=function(t){for(var e,n=t.length,r=n^n,i=0;n>=4;)e=1540483477*(65535&(e=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+((1540483477*(e>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(e=1540483477*(65535&(e^=e>>>24))+((1540483477*(e>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:r^=(255&t.charCodeAt(i+2))<<16;case 2:r^=(255&t.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),((r^=r>>>15)>>>0).toString(36)},O={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var _=/[A-Z]|^ms/g,S=/_EMO_([^_]+?)_([^]*?)_EMO_/g,w=function(t){return 45===t.charCodeAt(1)},E=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){return w(t)?t:t.replace(_,"-$&").toLowerCase()})),x=function(t,e){if(null==e||"boolean"==typeof e)return"";switch(t){case"animation":case"animationName":if("string"==typeof e)return e.replace(S,(function(t,e,n){return P={name:e,styles:n,next:P},e}))}return 1===O[t]||w(t)||"number"!=typeof e||0===e?e:e+"px"};function C(t,e,n,r){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return P={name:n.name,styles:n.styles,next:P},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)P={name:i.name,styles:i.styles,next:P},i=i.next;return n.styles}return function(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=C(t,e,n[i],!1);else for(var o in n){var a=n[o];if("object"!=typeof a)null!=e&&void 0!==e[a]?r+=o+"{"+e[a]+"}":r+=E(o)+":"+x(o,a)+";";else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=e&&void 0!==e[a[0]]){var c=C(t,e,a,!1);switch(o){case"animation":case"animationName":r+=E(o)+":"+c+";";break;default:r+=o+"{"+c+"}"}}else for(var u=0;u<a.length;u++)r+=E(o)+":"+x(o,a[u])+";"}return r}(t,e,n);case"function":if(void 0!==t){var o=P,a=n(t);return P=o,C(t,e,a,r)}default:if(null==e)return n;var c=e[n];return void 0===c||r?n:c}}var P,T=/label:\s*([^\s;\n{]+)\s*;/g;var j=function(t,e,n){if(1===t.length&&"object"==typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var r=!0,i="";P=void 0;var o=t[0];null==o||void 0===o.raw?(r=!1,i+=C(n,e,o,!1)):i+=o[0];for(var a=1;a<t.length;a++)i+=C(n,e,t[a],46===i.charCodeAt(i.length-1)),r&&(i+=o[a]);T.lastIndex=0;for(var c,u="";null!==(c=T.exec(i));)u+="-"+c[1];return{name:b(i)+u,styles:i,next:P}};var A=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return j(e)},R=Object(l.createContext)("undefined"!=typeof HTMLElement?y():null),k=Object(l.createContext)({}),N=(R.Provider,function(t){return Object(l.forwardRef)((function(e,n){return Object(l.createElement)(R.Consumer,null,(function(r){return t(e,r,n)}))}))}),I="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",L=Object.prototype.hasOwnProperty,M=function(t,e,n,r){var i=e[I],o=[],a="",c=null===n?e.css:e.css(n);"string"==typeof c&&void 0!==t.registered[c]&&(c=t.registered[c]),o.push(c),void 0!==e.className&&(a=v(t.registered,o,e.className));var u=j(o);m(t,u,"string"==typeof i);a+=t.key+"-"+u.name;var s={};for(var f in e)L.call(e,f)&&"css"!==f&&f!==I&&(s[f]=e[f]);return s.ref=r,s.className=a,Object(l.createElement)(i,s)},$=N((function(t,e,n){return"function"==typeof t.css?Object(l.createElement)(k.Consumer,null,(function(r){return M(e,t,r,n)})):M(e,t,null,n)}));var D=function(t,e){var n=arguments;if(null==e||null==e.css)return l.createElement.apply(void 0,n);var r=n.length,i=new Array(r);i[0]=$;var o={};for(var a in e)L.call(e,a)&&(o[a]=e[a]);o[I]=t,i[1]=o;for(var c=2;c<r;c++)i[c]=n[c];return l.createElement.apply(null,i)},U=(l.Component,function t(e){for(var n=e.length,r=0,i="";r<n;r++){var o=e[r];if(null!=o){var a=void 0;switch(typeof o){case"boolean":break;case"object":if(Array.isArray(o))a=t(o);else for(var c in a="",o)o[c]&&c&&(a&&(a+=" "),a+=c);break;default:a=o}a&&(i&&(i+=" "),i+=a)}}return i});function V(t,e,n){var r=[],i=v(t,r,n);return r.length<2?n:i+e(r)}N((function(t,e){return Object(l.createElement)(k.Consumer,null,(function(n){var r=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=j(n,e.registered);return m(e,i,!1),e.key+"-"+i.name},i={css:r,cx:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return V(e.registered,r,U(n))},theme:n},o=t.children(i);return!0,o}))}));var z=n(2),W=n.n(z);function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function G(t,e,n){var r=l.createContext((function(){})),i=l.createContext(e);r.displayName=n?"Dispatch.".concat(n):"Dispatch.Context",i.displayName=n?"State.".concat(n):"Context.State";var o=function(n){var o=n.children,a=n.customInitialState,u=l.useReducer(t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(n,!0).forEach((function(e){W()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e,{},a||{})),s=c()(u,2),f=s[0],d=s[1];return D(r.Provider,{value:d},D(i.Provider,{value:f},o))};return o.displayName=n?"".concat(n,"Provider"):"ContextProvider",{DispatchContext:r,StateContext:i,ContextProvider:o}}var B,H,J,q=n(0);function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}!function(t){t.UPDATE_SETTING="update_setting"}(H||(H={})),function(t){t.VIEW_TYPE="viewType",t.FONT="font",t.FONT_SIZE_IN_EM="fontSizeInEm",t.LINE_HEIGHT_IN_EM="lineHeightInEm",t.CONTENT_PADDING_IN_PERCENT="contentPaddingInPercent",t.COLUMN_GAP_IN_PERCENT="columnGapInPercent",t.CONTAINER_HORIZONTAL_MARGIN="containerHorizontalMargin",t.CONTAINER_VERTICAL_MARGIN="containerVerticalMargin",t.AUTO_INVALIDATION="autoInvalidation"}(J||(J={}));var X,Z,K,Q=(B={},W()(B,J.VIEW_TYPE,q.ViewType.SCROLL),W()(B,J.FONT,"default"),W()(B,J.FONT_SIZE_IN_EM,1),W()(B,J.LINE_HEIGHT_IN_EM,1.67),W()(B,J.CONTENT_PADDING_IN_PERCENT,12),W()(B,J.COLUMN_GAP_IN_PERCENT,5),W()(B,J.CONTAINER_HORIZONTAL_MARGIN,30),W()(B,J.CONTAINER_VERTICAL_MARGIN,35),W()(B,J.AUTO_INVALIDATION,!0),B),tt=function(t,e){switch(e.type){case H.UPDATE_SETTING:return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(n,!0).forEach((function(e){W()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{},e.setting);default:return t}},et=G(tt,Q,"EpubSetting"),nt=et.DispatchContext,rt=et.StateContext,it=et.ContextProvider;function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}!function(t){t.UPDATE_CALCULATION="update_calculation"}(Z||(Z={})),function(t){t.TOTAL_PAGE="totalPage",t.TOTAL="total",t.PAGE_UNIT="pageUnit",t.SPINES="spines"}(K||(K={}));var at,ct,ut,st=(X={},W()(X,K.TOTAL_PAGE,0),W()(X,K.TOTAL,0),W()(X,K.PAGE_UNIT,0),W()(X,K.SPINES,[]),X),lt=function(t,e){switch(e.type){case Z.UPDATE_CALCULATION:return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(n,!0).forEach((function(e){W()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{},e.calculation);default:return t}},ft=G(lt,st,"EpubCalculation"),dt=ft.DispatchContext,ht=ft.StateContext,pt=ft.ContextProvider;function gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gt(n,!0).forEach((function(e){W()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(t){t.UPDATE_CURRENT="update_current",t.SET_READY_TO_READ="set_ready_to_read"}(ct||(ct={})),function(t){t.CURRENT_PAGE="currentPage",t.CURRENT_SPINE_INDEX="currentSpineIndex",t.CURRENT_POSITION="currentPosition",t.READY_TO_READ="readyToRead",t.VISIBLE_SPINE_INDEXES="visibleSpineIndexes"}(ut||(ut={}));var vt=(at={},W()(at,ut.CURRENT_PAGE,1),W()(at,ut.CURRENT_SPINE_INDEX,0),W()(at,ut.CURRENT_POSITION,0),W()(at,ut.READY_TO_READ,!1),W()(at,ut.VISIBLE_SPINE_INDEXES,[]),at),mt=function(t,e){switch(e.type){case ct.UPDATE_CURRENT:return yt({},t,{},e.current);case ct.SET_READY_TO_READ:return yt({},t,{readyToRead:e.readyToRead});default:return t}},bt=G(mt,vt,"EpubCurrent"),Ot=bt.DispatchContext,_t=bt.StateContext,St=bt.ContextProvider,wt=n(7),Et=n.n(wt),xt=n(8),Ct=n.n(xt),Pt=n(4),Tt=n(15),jt="set_content",At=new Tt,Rt=n(9),kt=n(5),Nt=function(){function t(t,e){var n=e.currentState,r=e.calculationState,i=e.settingState;this.readerJs=void 0,this.currentState=void 0,this.calculationState=void 0,this.settingState=void 0,this.contentsNum=0,this.readerJs=new Rt.Reader(t),this.currentState=n,this.calculationState=r,this.settingState=i,window.reader=this.readerJs}return t.init=function(e,n){var r=n.currentState,i=n.calculationState,o=n.settingState;this.instance||(console.log("ReaderJsHelper.init()",e),this.instance=new t(e,{currentState:r,calculationState:i,settingState:o}))},t.updateContents=function(t,e){this.instance&&(console.log("ReaderJsHelper.updateContents()",t,e),this.instance.contentsNum=t.length,this.instance.readerJs.setContents(t,e))},t.updateContext=function(t){this.instance&&(console.log("ReaderJsHelper.updateContext()",t),this.instance.readerJs.context=t)},t.updateState=function(t){var e=t.currentState,n=t.calculationState,r=t.settingState;this.instance&&(this.instance.currentState=e,this.instance.calculationState=n,this.instance.settingState=r)},t.get=function(t){if(!this.instance)return null;var e=void 0===t?this.instance.currentState.currentSpineIndex:t;return e="string"==typeof e?parseInt(e,10):e,this.instance.readerJs.getContent(e)},t.getReaderJs=function(){return this.instance?this.instance.readerJs:null},t.getSpineIndexByPoint=function(t,e){var n=this.instance.calculationState.spines,r=Object(kt.isScroll)(this.instance.settingState)?e+Object(Pt.getScrollTop)():t+Object(Pt.getScrollLeft)(),i=n.find((function(t){var e=t.offset,n=t.total;return r>=e&&r<e+n}));return i||null},t.getByPoint=function(t,e){if(!this.instance)return null;var n=this.getSpineIndexByPoint(t,e);return console.log("getByPoint",n),n?this.get(n.spineIndex):null},t.reviseImages=function(){var t=this;if(this.instance){for(var e=[],n=function(n){e.push(new Promise((function(e){try{var r=t.get(n);if(!r)return console.warn("empty content(".concat(n,") from ReaderJs")),e();r.reviseImages(e)}catch(t){console.warn(t),e()}})))},r=0;r<this.instance.contentsNum;r++)n(r);return Promise.all(e)}},t}();Nt.instance=void 0;var It,Lt,Mt,$t=Nt,Dt=n(1),Ut=n.n(Dt),Vt=Ut.a.number,zt=Ut.a.string.oneOf([q.ViewType.SCROLL,q.ViewType.PAGE1,q.ViewType.PAGE23,q.ViewType.PAGE12]),Wt=Ut.a.optional.string.oneOf([q.ViewType.SCROLL,q.ViewType.PAGE1,q.ViewType.PAGE23,q.ViewType.PAGE12]),Ft=Ut.a.string.oneOf([q.BindingType.LEFT,q.BindingType.RIGHT]),Gt=Ut.a.optional.string.oneOf([q.BindingType.LEFT,q.BindingType.RIGHT]);function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}!function(t){t.UPDATE_CALCULATION="update_calculation"}(Lt||(Lt={})),function(t){t.TOTAL_PAGE="totalPage",t.PAGE_UNIT="pageUnit",t.IMAGES="images"}(Mt||(Mt={}));var Ht,Jt,qt,Yt=(It={},W()(It,Mt.TOTAL_PAGE,0),W()(It,Mt.PAGE_UNIT,0),W()(It,Mt.IMAGES,[]),It),Xt=function(t,e){switch(e.type){case Lt.UPDATE_CALCULATION:return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(n,!0).forEach((function(e){W()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{},e.calculation);default:return t}},Zt=G(Xt,Yt,"ComicCalculation"),Kt=Zt.DispatchContext,Qt=Zt.StateContext,te=Zt.ContextProvider;function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(n,!0).forEach((function(e){W()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(t){t.UPDATE_CURRENT="update_current",t.SET_READY_TO_READ="set_ready_to_read"}(Jt||(Jt={})),function(t){t.CURRENT_PAGE="currentPage",t.READY_TO_READ="readyToRead"}(qt||(qt={}));var re,ie,oe,ae=(Ht={},W()(Ht,qt.CURRENT_PAGE,1),W()(Ht,qt.READY_TO_READ,!1),Ht),ce=function(t,e){switch(e.type){case Jt.UPDATE_CURRENT:return ne({},t,{},e.current);case Jt.SET_READY_TO_READ:return ne({},t,{readyToRead:e.readyToRead});default:return t}},ue=G(ce,ae,"ComicCurrent"),se=ue.DispatchContext,le=ue.StateContext,fe=ue.ContextProvider;function de(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}!function(t){t.UPDATE_SETTING="update_setting"}(ie||(ie={})),function(t){t.VIEW_TYPE="viewType",t.CONTENT_WIDTH_IN_PERCENT="contentWidthInPercent",t.BINDING_TYPE="bindingType",t.LAZY_LOAD="lazyLoad"}(oe||(oe={}));var he,pe,ge,ye,ve,me,be=(re={},W()(re,oe.VIEW_TYPE,q.ViewType.SCROLL),W()(re,oe.CONTENT_WIDTH_IN_PERCENT,100),W()(re,oe.BINDING_TYPE,q.BindingType.LEFT),W()(re,oe.LAZY_LOAD,4),re),Oe=function(t,e){switch(e.type){case ie.UPDATE_SETTING:return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?de(n,!0).forEach((function(e){W()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{},e.setting);default:return t}},_e=G(Oe,be,"ComicSetting"),Se=_e.DispatchContext,we=_e.StateContext,Ee=_e.ContextProvider,xe=Ut.a.number.not.negative,Ce=Ut.a.optional.number.not.negative,Pe=Ut.a.object.partialShape({imageIndex:xe,ratio:xe}),Te=Ut.a.object.partialShape((he={},W()(he,Mt.TOTAL_PAGE,Ce),W()(he,Mt.PAGE_UNIT,Ce),W()(he,Mt.IMAGES,Ut.a.optional.array.ofType(Pe)),he)),je=Ut.a.object.partialShape((pe={},W()(pe,qt.CURRENT_PAGE,Ce),W()(pe,qt.READY_TO_READ,Ut.a.optional.boolean),pe)),Ae=Ut.a.object.partialShape((ge={},W()(ge,oe.VIEW_TYPE,Wt),W()(ge,oe.CONTENT_WIDTH_IN_PERCENT,Ce),W()(ge,oe.BINDING_TYPE,Gt),W()(ge,oe.LAZY_LOAD,Ut.a.optional.any(Ut.a.boolean,Ut.a.number.not.negative)),ge)),Re=Ut.a.object.partialShape({fileSize:xe,index:xe,path:Ut.a.optional.string,uri:Ut.a.optional.string,width:Ce,height:Ce}),ke=Ut.a.object.partialShape({images:Ut.a.optional.array.ofType(Re),unzipPath:Ut.a.string}),Ne=Ut.a.number.not.negative,Ie=Ut.a.optional.number.not.negative,Le=Ut.a.object.partialShape({spineIndex:Ne,offset:Ne,total:Ne,startPage:Ne,totalPage:Ne}),Me=Ut.a.object.partialShape((ye={},W()(ye,K.TOTAL_PAGE,Ie),W()(ye,K.PAGE_UNIT,Ie),W()(ye,K.SPINES,Ut.a.optional.array.ofType(Le)),ye)),$e=Ut.a.object.partialShape((ve={},W()(ve,ut.CURRENT_PAGE,Ie),W()(ve,ut.CURRENT_SPINE_INDEX,Ie),W()(ve,ut.CURRENT_POSITION,Ie),W()(ve,ut.READY_TO_READ,Ut.a.optional.boolean),W()(ve,ut.VISIBLE_SPINE_INDEXES,Ut.a.optional.array.ofType(Ut.a.number)),ve)),De=Ut.a.object.partialShape((me={},W()(me,J.VIEW_TYPE,Wt),W()(me,J.FONT,Ut.a.optional.string),W()(me,J.FONT_SIZE_IN_EM,Ie),W()(me,J.LINE_HEIGHT_IN_EM,Ie),W()(me,J.CONTENT_PADDING_IN_PERCENT,Ie),W()(me,J.COLUMN_GAP_IN_PERCENT,Ie),W()(me,J.CONTAINER_HORIZONTAL_MARGIN,Ie),W()(me,J.CONTAINER_VERTICAL_MARGIN,Ie),me)),Ue=Ut.a.object.partialShape({href:Ut.a.string,uri:Ut.a.optional.string,size:Ut.a.optional.number.not.negative}),Ve=Ut.a.object.partialShape({fonts:Ut.a.optional.array.ofType(Ue),styles:Ut.a.optional.array.ofType(Ut.a.string),spines:Ut.a.optional.array.ofType(Ut.a.string),unzipPath:Ut.a.string}),ze={Common:r,Comic:i,Epub:o};function We(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?We(n,!0).forEach((function(e){W()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):We(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ge="data-react-reader",Be=function(){function t(t){var e=this,n=t.dispatchSetting,r=t.dispatchCalculation,i=t.dispatchCurrent,o=t.settingState,a=t.currentState,c=t.calculationState;this.dispatchSetting=void 0,this.dispatchCalculation=void 0,this.dispatchCurrent=void 0,this.settingState=void 0,this.currentState=void 0,this.calculationState=void 0,this.isLoaded=!1,this.isImageLoaded=!1,this.setCalculation=function(t){e.dispatchCalculation({type:Z.UPDATE_CALCULATION,calculation:t}),e.calculationState=Fe({},e.calculationState,{},t)},this.setSetting=function(t){e.dispatchSetting({type:H.UPDATE_SETTING,setting:t}),e.settingState=Fe({},e.settingState,{},t)},this.setCurrent=function(t){e.dispatchCurrent({type:ct.UPDATE_CURRENT,current:t}),e.currentState=Fe({},e.currentState,{},t)},this.setReadyToRead=function(t){e.dispatchCurrent({type:ct.SET_READY_TO_READ,readyToRead:t})},this.appendStyles=function(t){var e=t.metadata;if(document.querySelectorAll("[".concat(Ge,"]")).forEach((function(t){return t.remove()})),e.styles){var n=document.createElement("style");n.setAttribute(Ge,""),n.innerText=e.styles.join(" "),document.head.appendChild(n),console.log("epub content styles appended:",e.styles.length)}},this.loadFonts=function(){var t=Ct()(Et.a.mark((function t(e){var n,r;return Et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.metadata).fonts){t.next=3;break}return t.abrupt("return");case 3:return r=n.fonts.map((function(t){var e=t.href,r=t.uri,i=e.split("/").slice(-1)[0].replace(/\./g,"_"),o=r||"".concat(n.unzipPath,"/").concat(e);return new FontFace(i,'url("'.concat(o,'")'))})),t.next=6,Promise.all(r.map((function(t){return t.load().then((function(){console.log("epub embedded font loaded:",t.family),document.fonts.add(t)})).catch((function(t){return console.warn("epub embedded font loading error:",t)}))})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.prepareLoad=function(){var t=Ct()(Et.a.mark((function t(n,r){var i;return Et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.metadata,e.appendStyles({metadata:i}),t.next=4,e.loadFonts({metadata:i});case 4:r();case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.waitImagesLoaded=Ct()(Et.a.mark((function t(){var n,r;return Et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isImageLoaded){t.next=2;break}return t.abrupt("return");case 2:return n=Array.from(document.images),r=0,t.next=6,new Promise((function(t){var e=function(){(r+=1)===n.length&&t()};n.forEach((function(t){t.complete?e():(t.addEventListener("load",e),t.addEventListener("error",e))}))}));case 6:console.log("epub content images loaded:",n.length);case 7:case"end":return t.stop()}}),t)}))),this.prepareCalculate=function(){var t=Ct()(Et.a.mark((function t(n){return Et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.waitImagesLoaded();case 2:$t.reviseImages(),setTimeout((function(){n()}),0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.calculate=function(){var t={totalPage:0,total:0,pageUnit:0,spines:[]},n=Object(Pt.getContentContainerElement)();if(!n)return e.calculationState;var r=Array.from(n.getElementsByTagName("article"));if(Object(kt.isScroll)(e.settingState)){if(t.pageUnit=Object(Pt.getClientHeight)(),t.spines=r.map((function(e,n){var r=e.scrollHeight,i=e.offsetTop;return{spineIndex:n,offset:i,total:r,startPage:Math.floor(i/t.pageUnit)+1,totalPage:Math.floor(r/t.pageUnit)}})),0===r.length)return e.calculationState;var i=t.spines.slice(-1)[0],o=i.offset,a=i.total;t.total=o+a,t.totalPage=Math.floor((o+a)/t.pageUnit)}else{var c=document.createElement("article");c.style.marginTop="99%",n.appendChild(c),r.push(c),t.pageUnit=Object(kt.columnWidth)(e.settingState)+Object(kt.columnGap)(e.settingState);var u=n?n.offsetLeft:0;r.reduce((function(e,n,r){var i=e.offset,o=e.startPage,a=n.offsetLeft,c=0;return r>0&&(c=Math.ceil((a-i)/t.pageUnit),t.spines.push({spineIndex:r-1,offset:i-u,total:a-i,startPage:o,totalPage:c})),{offset:a,startPage:o+c}}),{offset:0,startPage:1});var s=t.spines.slice(-1)[0],l=s.offset,f=s.total,d=s.startPage,h=s.totalPage;t.total=l+f,t.totalPage=d+h-1,n.removeChild(c)}e.setCalculation(t),console.log("paging result =>",t)},this.getPageFromSpineIndexAndPosition=function(){if(e.currentState.currentSpineIndex>e.calculationState.spines.length-1)return 1;var t=e.calculationState.spines[e.currentState.currentSpineIndex],n=t.offset,r=t.total,i=t.startPage,o=t.totalPage;return Object(kt.isScroll)(e.settingState)?(console.log("getPageFromSpineIndexAndPosition","Math.floor((".concat(n," + ").concat(r," * ").concat(e.currentState.currentPosition,") / ").concat(e.calculationState.pageUnit,") + 1")),Math.floor((n+r*e.currentState.currentPosition)/e.calculationState.pageUnit)+1):i+Math.floor(o*e.currentState.currentPosition)},this.restoreCurrent=function(){var t=e.getPageFromSpineIndexAndPosition();console.log("restoring to: ",t),e.goToPage(t)},this.goToPage=function(t){Ut()(t,"EpubService.goToPage(page)",ze.Common.Page);var n=Object(kt.allowedPageNumber)(e.settingState,e.calculationState,t),r=e.calculationState.pageUnit,i=(n-1)*r;Object(kt.isScroll)(e.settingState)?(Object(Pt.setScrollLeft)(0),Object(Pt.setScrollTop)(i)):(Object(Pt.setScrollLeft)(i),Object(Pt.setScrollTop)(0),console.log("scrollLeft => ".concat((n-1)*r))),e.setCurrent({currentPage:n})},this.invalidate=function(){if(e.isLoaded){var t=function(){e.updateCurrent(),e.setReadyToRead(!0)};try{e.setReadyToRead(!1),e.prepareCalculate((function(){e.calculate(),e.restoreCurrent(),t()}))}catch(e){console.error(e),t()}}},this.load=function(t){Ut()(t,"EpubService.load(metadata)",ze.Epub.EpubParsedData),e.isLoaded=!0,e.setReadyToRead(!1),e.prepareLoad({metadata:t},(function(){At.emit(jt,t.spines)}))},this.getCurrentFromScrollPosition=function(t){var n=e.calculationState,r=n.pageUnit,i=n.spines,o={currentPage:Math.floor(t/r)+1||1,currentSpineIndex:0,currentPosition:0,visibleSpineIndexes:[]};if(Object(kt.isScroll)(e.settingState)){var a=t,c=i.filter((function(t){var e=t.offset,n=t.total,i=[a,a+r],o=[e,e+n];return Object(Pt.hasIntersect)(i,o)}));c&&c.length>0&&(o.currentSpineIndex=c[0].spineIndex,o.currentPosition=Math.max((a-c[0].offset)/c[0].total,0),o.visibleSpineIndexes=c.map((function(t){return t.spineIndex})))}else{var u=t,s=i.filter((function(t){var n=t.offset,i=t.total,o=[u,u+r*Object(kt.columnsInPage)(e.settingState)],a=[n,n+i];return Object(Pt.hasIntersect)(o,a)}));s&&s.length>0&&(o.currentSpineIndex=s[0].spineIndex,o.currentPosition=(u-s[0].offset)/s[0].total,o.visibleSpineIndexes=s.map((function(t){return t.spineIndex})))}return o},this.updateCurrent=function(){var t=e.getCurrentFromScrollPosition(Object(kt.isScroll)(e.settingState)?Object(Pt.getScrollTop)():Object(Pt.getScrollLeft)());e.setCurrent(t),console.log("update currentstate => ",t)},this.updateSetting=function(t){Ut()(t,"EpubService.updateSetting(setting)",ze.Epub.SettingState),e.setReadyToRead(!1),e.setSetting(t),e.settingState.autoInvalidation&&e.invalidate()},this.dispatchSetting=n,this.dispatchCalculation=r,this.dispatchCurrent=i,this.settingState=o,this.currentState=a,this.calculationState=c}return t.init=function(e){this.instance||(this.instance=new t(e),console.log("[EpubService] initialized"))},t.destroy=function(){this.instance&&(this.instance=void 0),console.log("[EpubService] destroyed")},t.isInitialized=function(){return!!this.instance},t.get=function(){if(!this.instance)throw new Error("There is no initialized `EpubService` instance");return this.instance},t.updateState=function(t){var e=t.settingState,n=t.currentState,r=t.calculationState;this.get().settingState=e,this.get().currentState=n,this.get().calculationState=r},t}();Be.instance=void 0;var He=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return Rt.Context.build((function(n){var r=kt.isScroll(t);n.width=r?Object(Pt.getClientWidth)():kt.columnWidth(t),n.height=r?Object(Pt.getClientHeight)():kt.containerHeight(t),n.gap=r?0:kt.columnGap(t),n.isSameDomAsUi=!0,n.isDoublePageMode=kt.isDoublePage(t),n.isScrollMode=kt.isScroll(t),n.maxSelectionLength=e}))},Je=function(t){var e=t.children,n=l.useContext(nt),r=l.useContext(dt),i=l.useContext(Ot),o=l.useContext(rt),a=l.useContext(_t),c=l.useContext(ht);return l.useEffect((function(){return $t.init(He(o),{currentState:a,settingState:o,calculationState:c}),Be.init({dispatchSetting:n,dispatchCalculation:r,dispatchCurrent:i,settingState:o,currentState:a,calculationState:c}),function(){Be.destroy()}}),[]),l.useEffect((function(){Be.updateState({settingState:o,currentState:a,calculationState:c})}),[o,a,c]),l.useEffect((function(){$t.updateState({currentState:a,settingState:o,calculationState:c})}),[a,o,c]),l.useEffect((function(){$t.updateContext(He(o))}),[c]),D(l.Fragment,null,e)},qe=function(t){var e=t.children,n=t.settingState,r=t.calculationState,i=t.currentState;return Ut()(n,"EpubProvider.settingState",Ut.a.any(Ut.a.nullOrUndefined,ze.Epub.SettingState)),Ut()(r,"EpubProvider.calculationState",Ut.a.any(Ut.a.nullOrUndefined,ze.Epub.CalculationState)),Ut()(i,"EpubProvider.currentState",Ut.a.any(Ut.a.nullOrUndefined,ze.Epub.CurrentState)),D(it,{customInitialState:n},D(pt,{customInitialState:r},D(St,{customInitialState:i},D(Je,null,e))))},Ye=n(6);function Xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xe(n,!0).forEach((function(e){W()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xe(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ke=function(){function t(t){var e=this,n=t.dispatchSetting,r=t.dispatchCalculation,i=t.dispatchCurrent,o=t.settingState,a=t.currentState,c=t.calculationState;this.dispatchSetting=void 0,this.dispatchCalculation=void 0,this.dispatchCurrent=void 0,this.settingState=void 0,this.currentState=void 0,this.calculationState=void 0,this.setReadyToRead=function(){var t=Ct()(Et.a.mark((function t(n){return Et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e.dispatchCurrent({type:Jt.SET_READY_TO_READ,readyToRead:n}),setTimeout((function(){console.log("readyToRead => ".concat(n)),t()}),0)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.restoreCurrent=Ct()(Et.a.mark((function t(){return Et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.goToPage(e.currentState.currentPage);case 2:case"end":return t.stop()}}),t)}))),this.calculate=Ct()(Et.a.mark((function t(){var n,r,i,o;return Et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Object(Ye.isScroll)(e.settingState)){t.next=8;break}return n=Object(Ye.contentWidth)(e.settingState),r=0,i=e.calculationState.images.map((function(t){var e=n*t.ratio,i=Ze({},t,{height:e,offsetTop:r});return r+=e,i})),e.dispatchCalculation({type:Lt.UPDATE_CALCULATION,calculation:{images:i}}),t.abrupt("return",Ze({},e.calculationState,{images:i}));case 8:return o=Object(Ye.contentWidth)(e.settingState),e.dispatchCalculation({type:Lt.UPDATE_CALCULATION,calculation:{pageUnit:o}}),t.abrupt("return",Ze({},e.calculationState,{pageUnit:o}));case 11:case"end":return t.stop()}}),t)}))),this.invalidate=Ct()(Et.a.mark((function t(){return Et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setReadyToRead(!1);case 2:return t.prev=2,t.next=5,e.calculate();case 5:return e.calculationState=t.sent,t.next=8,e.restoreCurrent();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.error(t.t0);case 13:return t.next=15,e.setReadyToRead(!0);case 15:case"end":return t.stop()}}),t,null,[[2,10]])}))),this.initialCalculate=function(){var t=Ct()(Et.a.mark((function t(n){var r,i,o,a;return Et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.images){t.next=2;break}return t.abrupt("return");case 2:r=Ze({},e.calculationState,{totalPage:n.images?n.images.length:0,images:n.images.map((function(t){return{imageIndex:t.index,ratio:Object(Ye.ratio)(t.width,t.height),offsetTop:0,height:0}}))}),e.dispatchCalculation({type:Lt.UPDATE_CALCULATION,calculation:r}),e.calculationState=r,i=Object(Ye.startWithBlankPage)(e.settingState)?0:1,o=e.currentState.currentPage>1?e.currentState.currentPage:i,console.log("currentPage",o),a=Ze({},e.currentState,{currentPage:o}),e.dispatchCurrent({type:Jt.UPDATE_CURRENT,current:a}),e.currentState=a;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.load=function(){var t=Ct()(Et.a.mark((function t(n){return Et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Ut()(n,"ComicService.load(metadata)",ze.Comic.ComicParsedData),n.images){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.setReadyToRead(!1);case 5:return t.next=7,e.initialCalculate(n);case 7:return At.emit(jt,n.images),t.next=10,e.invalidate();case 10:return t.next=12,e.setReadyToRead(!0);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.goToPage=function(t){Ut()(t,"ComicService.goToPage(page)",ze.Common.Page);var n=Object(Ye.allowedPageNumber)(e.settingState,e.calculationState,t);if(Object(Ye.isScroll)(e.settingState))Object(Pt.setScrollLeft)(0),Object(Pt.setScrollTop)(e.calculationState.images[n-1].offsetTop),console.log("- scrollTop => ".concat(e.calculationState.images[n-1].offsetTop));else{var r=n-(Object(Ye.startWithBlankPage)(e.settingState)?0:1);Object(Pt.setScrollLeft)(r*e.calculationState.pageUnit),Object(Pt.setScrollTop)(0),console.log("- scrollLeft => ".concat(r*e.calculationState.pageUnit))}e.dispatchCurrent({type:Jt.UPDATE_CURRENT,current:{currentPage:n}})},this.updateSetting=function(){var t=Ct()(Et.a.mark((function t(n){return Et.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ut()(n,"ComicService.updateSetting(setting)",ze.Comic.SettingState),t.next=3,e.setReadyToRead(!1);case 3:e.dispatchSetting({type:ie.UPDATE_SETTING,setting:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.updateCurrent=function(){var t,n=e.calculationState,r=n.pageUnit,i=n.images;if(Object(Ye.isScroll)(e.settingState)){var o=Object(Pt.getScrollTop)(),a=i.find((function(t){var e=t.offsetTop,n=t.height;return o>=e&&o<e+n}));t=a?a.imageIndex+1:1}else{var c=Object(Pt.getScrollLeft)();t=Math.floor(c/r)+(Object(Ye.startWithBlankPage)(e.settingState)?0:1)}e.dispatchCurrent({type:Jt.UPDATE_CURRENT,current:{currentPage:t}})},this.dispatchSetting=n,this.dispatchCalculation=r,this.dispatchCurrent=i,this.settingState=o,this.currentState=a,this.calculationState=c}return t.init=function(e){this.instance||(this.instance=new t(e),console.log("[ComicService] initialized"))},t.destroy=function(){this.instance&&(this.instance=void 0),console.log("[ComicService] destroyed")},t.isInitialized=function(){return!!this.instance},t.get=function(){if(!this.instance)throw new Error("There is no initialized `ComicService` instance");return this.instance},t.updateState=function(t){var e=t.settingState,n=t.currentState,r=t.calculationState;this.get().settingState=e,this.get().currentState=n,this.get().calculationState=r},t}();Ke.instance=void 0;var Qe=function(t){var e=t.children,n=l.useContext(Se),r=l.useContext(Kt),i=l.useContext(se),o=l.useContext(we),a=l.useContext(le),c=l.useContext(Qt);return l.useEffect((function(){return Ke.init({dispatchSetting:n,dispatchCalculation:r,dispatchCurrent:i,settingState:o,currentState:a,calculationState:c}),function(){Ke.destroy()}}),[]),l.useEffect((function(){Ke.updateState({settingState:o,currentState:a,calculationState:c})}),[o,a,c]),D(l.Fragment,null,e)},tn=function(t){var e=t.children,n=t.settingState,r=t.calculationState,i=t.currentState;return Ut()(n,"ComicProvider.settingState",Ut.a.any(Ut.a.nullOrUndefined,ze.Comic.SettingState)),Ut()(r,"ComicProvider.calculationState",Ut.a.any(Ut.a.nullOrUndefined,ze.Comic.CalculationState)),Ut()(i,"ComicProvider.currentState",Ut.a.any(Ut.a.nullOrUndefined,ze.Comic.CurrentState)),D(Ee,{customInitialState:n},D(te,{customInitialState:r},D(fe,{customInitialState:i},D(Qe,null,e))))},en=function(t){return A("article *{-webkit-tap-highlight-color:transparent;",function(t){return"default"===t[J.FONT]?A(""):A("font-family:",t[J.FONT]," !important;")}(t)," line-height:",t[J.LINE_HEIGHT_IN_EM],"em !important;word-break:break-word;}article{font-size:",t[J.FONT_SIZE_IN_EM],"em !important;height:initial !important;p{font-size:1em;}img,video,svg{max-width:100%;max-height:95%;margin:0 auto;padding:0;}pre{white-space:pre-wrap;}a:-webkit-any-link{text-decoration:none;}sup,sup a,sup span,sup p,sup br,sup strong,sup b,sup em,sup i,sub,sub a,sub span,sub p,sub br,sub strong,sub b,sub em,sub i,h1,h1 a,h1 span,h1 p,h1 br,h1 strong,h1 b,h1 em,h1 i,h2,h2 a,h2 span,h2 p,h2 br,h2 strong,h2 b,h2 em,h2 i,h3,h3 a,h3 span,h3 p,h3 br,h3 strong,h3 b,h3 em,h3 i,h4,h4 a,h4 span,h4 p,h4 br,h4 strong,h4 b,h4 em,h4 i,h5,h5 a,h5 span,h5 p,h5 br,h5 strong,h5 b,h5 em,h5 i,h6,h6 a,h6 span,h6 p,h6 br,h6 strong,h6 b,h6 em,h6 i{line-height:initial !important;}rt,rt *{text-align:initial !important;}aside{display:none;}}")},nn=function(t,e){return kt.isScroll(t)?function(t){return A("article{padding-top:25px;padding-bottom:25px;}",en(t),"")}(t):function(t,e){return A("column-width:",kt.columnWidth(t),"px;column-gap:",kt.columnGap(t),"px;column-fill:auto;height:100%;article{-webkit-column-break-before:always;-webkit-column-break-after:always;-webkit-column-break-inside:auto;break-before:column;}article:last-child{padding-bottom:",e.totalPage%2==0?0:"50%",";}",en(t),"")}(t,e)},rn=function(t){if(kt.isScroll(t))return A("margin:",t.containerVerticalMargin,"px ",t.containerHorizontalMargin+kt.contentPadding(t),"px;");var e=kt.containerWidth(t),n=kt.containerHeight(t);return A("width:",e,"px;height:",n,"px;margin:",t.containerVerticalMargin,"px ",t.containerHorizontalMargin+kt.contentPadding(t),"px;overflow:hidden;")},on=function(){var t=l.useRef(null),e=l.useState(""),n=c()(e,2),r=n[0],i=n[1],o=l.useContext(ht),a=l.useContext(rt),u=l.useContext(_t),s=u.readyToRead,f=function(t){return i(t.join(""))},d=function(){u.readyToRead&&Be.isInitialized()&&Be.get().updateCurrent()},h=function(){Be.isInitialized()&&Be.get().invalidate()},p=function(){a.autoInvalidation&&h()};return l.useEffect((function(){return At.on(jt,f),window.addEventListener("resize",p),function(){At.off(jt,f),window.removeEventListener("resize",p)}}),[]),l.useLayoutEffect((function(){t.current&&($t.updateContents(Array.from(t.current.getElementsByTagName("article")),t.current),h())}),[r]),l.useEffect((function(){var t=Object(kt.isScroll)(a)?window:Object(Pt.getContentRootElement)();return t&&t.addEventListener("scroll",d),function(){var t=Object(kt.isScroll)(a)?window:Object(Pt.getContentRootElement)();t&&t.removeEventListener("scroll",d)}}),[s]),D("div",{id:"content_root",css:rn(a)},D("div",{id:"content_container",css:nn(a,o),ref:t,dangerouslySetInnerHTML:{__html:r}}))},an=n(16),cn=n.n(an),un=function(t){return Object(Ye.isScroll)(t)?A(""):A("width:",Object(Pt.getClientWidth)(),"px;height:",Object(Pt.getClientHeight)(),"px;overflow:hidden;")},sn=function(t,e){return Object(Ye.isScroll)(t)?A(""):A("width:",Object(Ye.containerWidth)(t,e),"px;height:",Object(Pt.getClientHeight)(),"px;")},ln=function(t,e,n,r){return Object(Ye.isScroll)(t)?A("width:",Object(Ye.contentWidth)(t),"px;height:",e*Object(Ye.contentWidth)(t),"px;position:relative;img{width:100%;height:100%;opacity:",n===q.ImageStatus.LOADED?1:0,";}"):A("width:",Object(Ye.contentWidth)(t),"px;height:",Object(Pt.getClientHeight)(),"px;display:inline-block;position:relative;img{width:100%;height:100%;opacity:",n===q.ImageStatus.LOADED?1:0,";object-fit:contain;object-position:",Object(Ye.objectPosition)(t,r),";}")},fn={name:"1yx5i5u-loading",styles:"width:100%;height:100%;position:absolute;top:0;left:0;label:loading;"},dn={name:"1fdx6i8-error",styles:"width:100%;height:100%;position:absolute;top:0;left:0;label:error;"},hn=function(t){var e=t.image,n=t.renderers,r=void 0===n?{}:n,i=l.useContext(we),o=l.useContext(le),a=r.ErrorRenderer||gn,u=r.LoadingRenderer||pn,s=l.useState(q.ImageStatus.NONE),f=c()(s,2),d=f[0],h=f[1];l.useEffect((function(){!function(){if(d!==q.ImageStatus.LOADED)if(i.lazyLoad){var t=i.lazyLoad;e.index+1>=o.currentPage-t&&e.index+1<o.currentPage+t&&h(q.ImageStatus.LOADING)}else h(q.ImageStatus.LOADING)}()}),[o]);return D("div",{css:ln(i,Object(Ye.ratio)(e.width,e.height),d,e.index)},q.ImageStatus.NONE!==d&&q.ImageStatus.ERROR!==d&&D("img",{src:e.uri,onLoad:function(){return h(q.ImageStatus.LOADED)},onError:function(){return h(q.ImageStatus.ERROR)}}),q.ImageStatus.LOADING===d&&D(u,null),q.ImageStatus.ERROR===d&&D(a,{retry:function(){return h(q.ImageStatus.LOADING)}}))},pn=function(){return D("div",{css:fn},"Loading...")},gn=function(t){var e=t.retry;return D("div",{css:dn},D("button",{onClick:e},"Retry"))},yn=function(t){var e,n=t.settingState;return D("div",{css:(e=n,A("width:",Object(Ye.contentWidth)(e),"px;height:",Object(Pt.getClientHeight)(),"px;display:inline-block;"))})},vn=-1,mn=function(t){var e=t.renderers,n=void 0===e?{}:e,r=l.useState([]),i=c()(r,2),o=i[0],a=i[1],u=l.useContext(Qt),s=l.useContext(we),f=l.useContext(le),d=Object(Pt.debounce)((function(){f.readyToRead&&Ke.isInitialized()&&Ke.get().updateCurrent()})),h=function(){Ke.isInitialized()&&Ke.get().invalidate()};l.useEffect((function(){return At.on(jt,a),function(){At.off(jt,a)}}),[]),l.useEffect((function(){window.addEventListener("resize",h);var t=Object(Ye.isScroll)(s)?window:Object(Pt.getContentRootElement)();return t&&t.addEventListener("scroll",d),function(){window.removeEventListener("resize",h);var t=Object(Ye.isScroll)(s)?window:Object(Pt.getContentRootElement)();t&&t.removeEventListener("scroll",d)}}),[s,u,f]),l.useEffect((function(){o.length>0&&h()}),[s]);var p=l.useMemo((function(){var t=o.map((function(t){return t.index}));if(Object(Ye.startWithBlankPage)(s)&&(t=[vn].concat(cn()(t))),Object(Ye.isDoublePage)(s)&&s.bindingType===q.BindingType.RIGHT)for(var e=0;e<t.length;e+=2)t.splice(e,2,e+1>=t.length?vn:t[e+1],t[e]);return t}),[o,s.viewType,s.bindingType]),g=n.ImageRenderer||hn;return D("div",{id:"content_root",css:un(s)},D("div",{css:sn(s,u)},p.map((function(t,e){if(t===vn)return D(yn,{key:"comic-blank-".concat(e),settingState:s});var r=o[t];return D(g,{key:"comic-image-".concat(r.index),image:r,renderers:n})}))))},bn=n(11);n.d(e,"EpubReader",(function(){return on})),n.d(e,"ComicReader",(function(){return mn})),n.d(e,"ReaderJsHelper",(function(){return $t})),n.d(e,"EpubService",(function(){return Be})),n.d(e,"ComicService",(function(){return Ke})),n.d(e,"EpubSettingActionType",(function(){return H})),n.d(e,"EpubSettingProperties",(function(){return J})),n.d(e,"initialEpubSettingState",(function(){return Q})),n.d(e,"EpubSettingReducer",(function(){return tt})),n.d(e,"EpubSettingDispatchContext",(function(){return nt})),n.d(e,"EpubSettingContext",(function(){return rt})),n.d(e,"EpubSettingContextProvider",(function(){return it})),n.d(e,"EpubCalculationActionType",(function(){return Z})),n.d(e,"EpubCalculationProperties",(function(){return K})),n.d(e,"initialEpubCalculationState",(function(){return st})),n.d(e,"EpubCalculationReducer",(function(){return lt})),n.d(e,"EpubCalculationDispatchContext",(function(){return dt})),n.d(e,"EpubCalculationContext",(function(){return ht})),n.d(e,"EpubCalculationContextProvider",(function(){return pt})),n.d(e,"EpubCurrentActionType",(function(){return ct})),n.d(e,"EpubCurrentProperties",(function(){return ut})),n.d(e,"initialEpubCurrentState",(function(){return vt})),n.d(e,"EpubCurrentReducer",(function(){return mt})),n.d(e,"EpubCurrentDispatchContext",(function(){return Ot})),n.d(e,"EpubCurrentContext",(function(){return _t})),n.d(e,"EpubCurrentContextProvider",(function(){return St})),n.d(e,"EpubProvider",(function(){return qe})),n.d(e,"ComicSettingActionType",(function(){return ie})),n.d(e,"ComicSettingProperties",(function(){return oe})),n.d(e,"initialComicSettingState",(function(){return be})),n.d(e,"ComicSettingReducer",(function(){return Oe})),n.d(e,"ComicSettingDispatchContext",(function(){return Se})),n.d(e,"ComicSettingContext",(function(){return we})),n.d(e,"ComicSettingContextProvider",(function(){return Ee})),n.d(e,"ComicCalculationActionType",(function(){return Lt})),n.d(e,"ComicCalculationProperties",(function(){return Mt})),n.d(e,"initialComicCalculationState",(function(){return Yt})),n.d(e,"ComicCalculationReducer",(function(){return Xt})),n.d(e,"ComicCalculationDispatchContext",(function(){return Kt})),n.d(e,"ComicCalculationContext",(function(){return Qt})),n.d(e,"ComicCalculationContextProvider",(function(){return te})),n.d(e,"ComicCurrentActionType",(function(){return Jt})),n.d(e,"ComicCurrentProperties",(function(){return qt})),n.d(e,"initialComicCurrentState",(function(){return ae})),n.d(e,"ComicCurrentReducer",(function(){return ce})),n.d(e,"ComicCurrentDispatchContext",(function(){return se})),n.d(e,"ComicCurrentContext",(function(){return le})),n.d(e,"ComicCurrentContextProvider",(function(){return fe})),n.d(e,"ComicProvider",(function(){return tn})),n.d(e,"Context",(function(){return Rt.Context})),n.d(e,"Rect",(function(){return Rt.Rect})),n.d(e,"RectList",(function(){return Rt.RectList})),n.d(e,"ViewType",(function(){return q.ViewType})),n.d(e,"BindingType",(function(){return q.BindingType})),n.d(e,"ImageStatus",(function(){return q.ImageStatus})),n.d(e,"SettingUtil",(function(){return bn.SettingUtil})),n.d(e,"EpubSettingUtil",(function(){return bn.EpubSettingUtil})),n.d(e,"ComicSettingUtil",(function(){return bn.ComicSettingUtil})),n.d(e,"Util",(function(){return bn.Util})),n.d(e,"Context",(function(){return bn.Context})),n.d(e,"Rect",(function(){return bn.Rect})),n.d(e,"RectList",(function(){return bn.RectList}))}])}));